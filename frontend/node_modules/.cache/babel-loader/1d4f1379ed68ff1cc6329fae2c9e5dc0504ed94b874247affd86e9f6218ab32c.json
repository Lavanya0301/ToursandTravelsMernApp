{"ast":null,"code":"\"use strict\";\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\n/**\n * Utilities\n * @module utils\n * @borrows module:auth_token as generate_auth_token\n */\n\nvar crypto = require(\"crypto\");\nvar querystring = require(\"querystring\");\nvar urlParse = require(\"url\").parse;\n\n// Functions used internally\nvar compact = require(\"lodash/compact\");\nvar first = require(\"lodash/first\");\nvar isFunction = require(\"lodash/isFunction\");\nvar isPlainObject = require(\"lodash/isPlainObject\");\nvar last = require(\"lodash/last\");\nvar map = require(\"lodash/map\");\nvar take = require(\"lodash/take\");\nvar at = require(\"lodash/at\");\n\n// Exposed by the module\nvar clone = require(\"lodash/clone\");\nvar extend = require(\"lodash/extend\");\nvar filter = require(\"lodash/filter\");\nvar includes = require(\"lodash/includes\");\nvar isArray = require(\"lodash/isArray\");\nvar isEmpty = require(\"lodash/isEmpty\");\nvar isNumber = require(\"lodash/isNumber\");\nvar isObject = require(\"lodash/isObject\");\nvar isString = require(\"lodash/isString\");\nvar isUndefined = require(\"lodash/isUndefined\");\nvar smart_escape = require(\"./encoding/smart_escape\");\nvar consumeOption = require('./parsing/consumeOption');\nvar toArray = require('./parsing/toArray');\nvar _require = require('./encoding/base64EncodeURL'),\n  base64EncodeURL = _require.base64EncodeURL;\nvar encodeDoubleArray = require('./encoding/encodeDoubleArray');\nvar config = require(\"../config\");\nvar generate_token = require(\"../auth_token\");\nvar utf8_encode = require('./utf8_encode');\nvar crc32 = require('./crc32');\nvar ensurePresenceOf = require('./ensurePresenceOf');\nvar ensureOption = require('./ensureOption').defaults(config());\nvar entries = require('./entries');\nvar isRemoteUrl = require('./isRemoteUrl');\nvar getSDKVersions = require('./encoding/sdkAnalytics/getSDKVersions');\nvar _require$Util = require('cloudinary-core').Util,\n  getAnalyticsOptions = _require$Util.getAnalyticsOptions,\n  getSDKAnalyticsSignature = _require$Util.getSDKAnalyticsSignature;\nexports = module.exports;\nvar utils = module.exports;\ntry {\n  // eslint-disable-next-line global-require\n  utils.VERSION = require('../../package.json').version;\n} catch (error) {\n  utils.VERSION = '';\n}\nfunction generate_auth_token(options) {\n  var token_options = Object.assign({}, config().auth_token, options);\n  return generate_token(token_options);\n}\nexports.CF_SHARED_CDN = \"d3jpl91pxevbkh.cloudfront.net\";\nexports.OLD_AKAMAI_SHARED_CDN = \"cloudinary-a.akamaihd.net\";\nexports.AKAMAI_SHARED_CDN = \"res.cloudinary.com\";\nexports.SHARED_CDN = exports.AKAMAI_SHARED_CDN;\nexports.USER_AGENT = `CloudinaryNodeJS/${exports.VERSION} (Node ${process.versions.node})`;\n\n// Add platform information to the USER_AGENT header\n// This is intended for platform information and not individual applications!\nexports.userPlatform = \"\";\nfunction getUserAgent() {\n  return isEmpty(utils.userPlatform) ? `${utils.USER_AGENT}` : `${utils.userPlatform} ${utils.USER_AGENT}`;\n}\nvar _require2 = require('./consts'),\n  DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION = _require2.DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION,\n  DEFAULT_POSTER_OPTIONS = _require2.DEFAULT_POSTER_OPTIONS,\n  DEFAULT_VIDEO_SOURCE_TYPES = _require2.DEFAULT_VIDEO_SOURCE_TYPES,\n  CONDITIONAL_OPERATORS = _require2.CONDITIONAL_OPERATORS,\n  PREDEFINED_VARS = _require2.PREDEFINED_VARS,\n  LAYER_KEYWORD_PARAMS = _require2.LAYER_KEYWORD_PARAMS,\n  TRANSFORMATION_PARAMS = _require2.TRANSFORMATION_PARAMS,\n  SIMPLE_PARAMS = _require2.SIMPLE_PARAMS,\n  UPLOAD_PREFIX = _require2.UPLOAD_PREFIX,\n  SUPPORTED_SIGNATURE_ALGORITHMS = _require2.SUPPORTED_SIGNATURE_ALGORITHMS,\n  DEFAULT_SIGNATURE_ALGORITHM = _require2.DEFAULT_SIGNATURE_ALGORITHM;\nfunction textStyle(layer) {\n  var keywords = [];\n  var style = \"\";\n  if (!isEmpty(layer.text_style)) {\n    return layer.text_style;\n  }\n  Object.keys(LAYER_KEYWORD_PARAMS).forEach(function (attr) {\n    var default_value = LAYER_KEYWORD_PARAMS[attr];\n    var attr_value = layer[attr] || default_value;\n    if (attr_value !== default_value) {\n      keywords.push(attr_value);\n    }\n  });\n  Object.keys(layer).forEach(function (attr) {\n    if (attr === \"letter_spacing\" || attr === \"line_spacing\") {\n      keywords.push(`${attr}_${layer[attr]}`);\n    }\n    if (attr === \"font_hinting\") {\n      keywords.push(`${attr.split(\"_\").pop()}_${layer[attr]}`);\n    }\n    if (attr === \"font_antialiasing\") {\n      keywords.push(`antialias_${layer[attr]}`);\n    }\n  });\n  if (layer.hasOwnProperty(\"font_size\" || \"font_family\") || !isEmpty(keywords)) {\n    if (!layer.font_size) throw `Must supply font_size for text in overlay/underlay`;\n    if (!layer.font_family) throw `Must supply font_family for text in overlay/underlay`;\n    keywords.unshift(layer.font_size);\n    keywords.unshift(layer.font_family);\n    style = compact(keywords).join(\"_\");\n  }\n  return style;\n}\n\n/**\n * Normalize an expression string, replace \"nice names\" with their coded values and spaces with \"_\"\n * e.g. `width > 0` => `w_lt_0`\n *\n * @param {String} expression An expression to be normalized\n * @return {Object|String} A normalized String of the input value if possible otherwise the value itself\n */\nfunction normalize_expression(expression) {\n  if (!isString(expression) || expression.length === 0 || expression.match(/^!.+!$/)) {\n    return expression;\n  }\n  var operators = \"\\\\|\\\\||>=|<=|&&|!=|>|=|<|/|-|\\\\^|\\\\+|\\\\*\";\n  var operatorsPattern = \"((\" + operators + \")(?=[ _]))\";\n  var operatorsReplaceRE = new RegExp(operatorsPattern, \"g\");\n  expression = expression.replace(operatorsReplaceRE, function (match) {\n    return CONDITIONAL_OPERATORS[match];\n  });\n\n  // Duplicate PREDEFINED_VARS to also include :{var_name} as well as {var_name}\n  // Example:\n  // -- PREDEFINED_VARS = ['foo']\n  // -- predefinedVarsPattern = ':foo|foo'\n  // It is done like this because node 6 does not support regex lookbehind\n  var predefinedVarsPattern = \"(\" + Object.keys(PREDEFINED_VARS).map(function (v) {\n    return `:${v}|${v}`;\n  }).join(\"|\") + \")\";\n  var userVariablePattern = '(\\\\$_*[^_ ]+)';\n  var variablesReplaceRE = new RegExp(`${userVariablePattern}|${predefinedVarsPattern}`, \"g\");\n  expression = expression.replace(variablesReplaceRE, function (match) {\n    return PREDEFINED_VARS[match] || match;\n  });\n  return expression.replace(/[ _]+/g, '_');\n}\n\n/**\n * Parse custom_function options\n * @private\n * @param {object|*} customFunction a custom function object containing function_type and source values\n * @return {string|*} custom_function transformation string\n */\nfunction process_custom_function(customFunction) {\n  if (!isObject(customFunction)) {\n    return customFunction;\n  }\n  if (customFunction.function_type === \"remote\") {\n    var encodedSource = base64EncodeURL(customFunction.source);\n    return [customFunction.function_type, encodedSource].join(\":\");\n  }\n  return [customFunction.function_type, customFunction.source].join(\":\");\n}\n\n/**\n * Parse custom_pre_function options\n * @private\n * @param {object|*} customPreFunction a custom function object containing function_type and source values\n * @return {string|*} custom_pre_function transformation string\n */\nfunction process_custom_pre_function(customPreFunction) {\n  var result = process_custom_function(customPreFunction);\n  return utils.isString(result) ? `pre:${result}` : null;\n}\n\n/**\n * Parse \"if\" parameter\n * Translates the condition if provided.\n * @private\n * @return {string} \"if_\" + ifValue\n */\nfunction process_if(ifValue) {\n  return ifValue ? \"if_\" + normalize_expression(ifValue) : ifValue;\n}\n\n/**\n * Parse layer options\n * @private\n * @param {object|*} layer The layer to parse.\n * @return {string} layer transformation string\n */\nfunction process_layer(layer) {\n  var result = '';\n  if (isPlainObject(layer)) {\n    if (layer.resource_type === \"fetch\" || layer.url != null) {\n      result = `fetch:${base64EncodeURL(layer.url)}`;\n    } else {\n      var public_id = layer.public_id;\n      var format = layer.format;\n      var resource_type = layer.resource_type || \"image\";\n      var type = layer.type || \"upload\";\n      var text = layer.text;\n      var style = null;\n      var components = [];\n      var noPublicId = isEmpty(public_id);\n      if (!noPublicId) {\n        public_id = public_id.replace(new RegExp(\"/\", 'g'), \":\");\n        if (format != null) {\n          public_id = `${public_id}.${format}`;\n        }\n      }\n      if (isEmpty(text) && resource_type !== \"text\") {\n        if (noPublicId) {\n          throw \"Must supply public_id for resource_type layer_parameter\";\n        }\n        if (resource_type === \"subtitles\") {\n          style = textStyle(layer);\n        }\n      } else {\n        resource_type = \"text\";\n        type = null;\n        // type is ignored for text layers\n        style = textStyle(layer);\n        if (!isEmpty(text)) {\n          var noStyle = isEmpty(style);\n          if (!(noPublicId || noStyle) || noPublicId && noStyle) {\n            throw \"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay\";\n          }\n          var re = /\\$\\([a-zA-Z]\\w*\\)/g;\n          var start = 0;\n          var textSource = smart_escape(decodeURIComponent(text), /[,\\/]/g);\n          text = \"\";\n          for (var res = re.exec(textSource); res; res = re.exec(textSource)) {\n            text += smart_escape(textSource.slice(start, res.index));\n            text += res[0];\n            start = res.index + res[0].length;\n          }\n          text += encodeURIComponent(textSource.slice(start));\n        }\n      }\n      if (resource_type !== \"image\") {\n        components.push(resource_type);\n      }\n      if (type !== \"upload\") {\n        components.push(type);\n      }\n      components.push(style);\n      components.push(public_id);\n      components.push(text);\n      result = compact(components).join(\":\");\n    }\n  } else if (/^fetch:.+/.test(layer)) {\n    result = `fetch:${base64EncodeURL(layer.substr(6))}`;\n  } else {\n    result = layer;\n  }\n  return result;\n}\n\n/**\n * Parse radius options\n * @private\n * @param {Array<string|number>|string|number} radius The radius to parse\n * @return {string} radius transformation string\n */\nfunction process_radius(radius) {\n  if (!radius) {\n    return radius;\n  }\n  if (!isArray(radius)) {\n    radius = [radius];\n  }\n  if (radius.length === 0 || radius.length > 4) {\n    throw new Error(\"Radius array should contain between 1 and 4 values\");\n  }\n  if (radius.findIndex(function (x) {\n    return x === null;\n  }) >= 0) {\n    throw new Error(\"Corner: Cannot be null\");\n  }\n  return radius.map(normalize_expression).join(':');\n}\nfunction build_multi_and_sprite_params(tagOrOptions, options) {\n  var tag = null;\n  if (typeof tagOrOptions === 'string') {\n    tag = tagOrOptions;\n  } else {\n    if (isEmpty(options)) {\n      options = tagOrOptions;\n    } else {\n      throw new Error('First argument must be a tag when additional options are passed');\n    }\n    tag = null;\n  }\n  if (!options && !tag) {\n    throw new Error('Either tag or urls are required');\n  }\n  if (!options) {\n    options = {};\n  }\n  var urls = options.urls;\n  var transformation = generate_transformation_string(extend({}, options, {\n    fetch_format: options.format\n  }));\n  return {\n    tag,\n    transformation,\n    urls,\n    timestamp: utils.timestamp(),\n    async: options.async,\n    notification_url: options.notification_url\n  };\n}\nfunction build_upload_params(options) {\n  var params = {\n    access_mode: options.access_mode,\n    allowed_formats: options.allowed_formats && toArray(options.allowed_formats).join(\",\"),\n    asset_folder: options.asset_folder,\n    async: utils.as_safe_bool(options.async),\n    backup: utils.as_safe_bool(options.backup),\n    callback: options.callback,\n    cinemagraph_analysis: utils.as_safe_bool(options.cinemagraph_analysis),\n    colors: utils.as_safe_bool(options.colors),\n    display_name: options.display_name,\n    discard_original_filename: utils.as_safe_bool(options.discard_original_filename),\n    eager: utils.build_eager(options.eager),\n    eager_async: utils.as_safe_bool(options.eager_async),\n    eager_notification_url: options.eager_notification_url,\n    eval: options.eval,\n    exif: utils.as_safe_bool(options.exif),\n    faces: utils.as_safe_bool(options.faces),\n    folder: options.folder,\n    format: options.format,\n    filename_override: options.filename_override,\n    image_metadata: utils.as_safe_bool(options.image_metadata),\n    media_metadata: utils.as_safe_bool(options.media_metadata),\n    invalidate: utils.as_safe_bool(options.invalidate),\n    moderation: options.moderation,\n    notification_url: options.notification_url,\n    overwrite: utils.as_safe_bool(options.overwrite),\n    phash: utils.as_safe_bool(options.phash),\n    proxy: options.proxy,\n    public_id: options.public_id,\n    public_id_prefix: options.public_id_prefix,\n    quality_analysis: utils.as_safe_bool(options.quality_analysis),\n    responsive_breakpoints: utils.generate_responsive_breakpoints_string(options.responsive_breakpoints),\n    return_delete_token: utils.as_safe_bool(options.return_delete_token),\n    timestamp: options.timestamp || exports.timestamp(),\n    transformation: utils.generate_transformation_string(clone(options)),\n    type: options.type,\n    unique_filename: utils.as_safe_bool(options.unique_filename),\n    upload_preset: options.upload_preset,\n    use_filename: utils.as_safe_bool(options.use_filename),\n    use_filename_as_display_name: utils.as_safe_bool(options.use_filename_as_display_name),\n    quality_override: options.quality_override,\n    accessibility_analysis: utils.as_safe_bool(options.accessibility_analysis),\n    use_asset_folder_as_public_id_prefix: utils.as_safe_bool(options.use_asset_folder_as_public_id_prefix)\n  };\n  return utils.updateable_resource_params(options, params);\n}\nfunction encode_key_value(arg) {\n  if (!isObject(arg)) {\n    return arg;\n  }\n  return entries(arg).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      k = _ref2[0],\n      v = _ref2[1];\n    return `${k}=${v}`;\n  }).join('|');\n}\n\n/**\n * @description Escape = and | with two backslashes \\\\\n * @param {string|number} value\n * @return {string}\n */\nfunction escapeMetadataValue(value) {\n  return value.toString().replace(/([=|])/g, '\\\\$&');\n}\n\n/**\n *\n * @description Encode metadata fields based on incoming value.\n *              If array, escape as color_id=[\\\"green\\\",\\\"red\\\"]\n *              If string/number, escape as in_stock_id=50\n *\n *              Joins resulting values with a pipe:\n *              in_stock_id=50|color_id=[\\\"green\\\",\\\"red\\\"]\n *\n *              = and | and escaped by default (this can't be turned off)\n *\n * @param metadataObj\n * @return {string}\n */\nfunction encode_context(metadataObj) {\n  if (!isObject(metadataObj)) {\n    return metadataObj;\n  }\n  return entries(metadataObj).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      key = _ref4[0],\n      value = _ref4[1];\n\n    // if string, simply parse the value and move on\n    if (isString(value)) {\n      return `${key}=${escapeMetadataValue(value)}`;\n\n      // If array, parse each item individually\n    } else if (isArray(value)) {\n      var values = value.map(function (innerVal) {\n        return `\\\"${escapeMetadataValue(innerVal)}\\\"`;\n      }).join(',');\n      return `${key}=[${values}]`;\n      // if unknown, return the value as string\n    } else {\n      return value.toString();\n    }\n  }).join('|');\n}\nfunction build_eager(transformations) {\n  return toArray(transformations).map(function (transformation) {\n    var transformationString = utils.generate_transformation_string(clone(transformation));\n    var format = transformation.format;\n    return format == null ? transformationString : `${transformationString}/${format}`;\n  }).join('|');\n}\n/**\n * Build the custom headers for the request\n * @private\n * @param headers\n * @return {Array<string>|object|string} An object of name and value,\n *         an array of header strings, or a string of headers\n */\nfunction build_custom_headers(headers) {\n  switch (true) {\n    case headers == null:\n      return void 0;\n    case isArray(headers):\n      return headers.join(\"\\n\");\n    case isObject(headers):\n      return entries(headers).map(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          k = _ref6[0],\n          v = _ref6[1];\n        return `${k}:${v}`;\n      }).join(\"\\n\");\n    default:\n      return headers;\n  }\n}\nfunction generate_transformation_string(options) {\n  if (utils.isString(options)) {\n    return options;\n  }\n  if (isArray(options)) {\n    return options.map(function (t) {\n      return utils.generate_transformation_string(clone(t));\n    }).filter(utils.present).join('/');\n  }\n  var responsive_width = consumeOption(options, \"responsive_width\", config().responsive_width);\n  var width = options.width;\n  var height = options.height;\n  var size = consumeOption(options, \"size\");\n  if (size) {\n    var _size$split = size.split(\"x\");\n    var _size$split2 = _slicedToArray(_size$split, 2);\n    width = _size$split2[0];\n    height = _size$split2[1];\n    var _ref7 = [width, height];\n    options.width = _ref7[0];\n    options.height = _ref7[1];\n  }\n  var has_layer = options.overlay || options.underlay;\n  var crop = consumeOption(options, \"crop\");\n  var angle = toArray(consumeOption(options, \"angle\")).join(\".\");\n  var no_html_sizes = has_layer || utils.present(angle) || crop === \"fit\" || crop === \"limit\" || responsive_width;\n  if (width && (width.toString().indexOf(\"auto\") === 0 || no_html_sizes || parseFloat(width) < 1)) {\n    delete options.width;\n  }\n  if (height && (no_html_sizes || parseFloat(height) < 1)) {\n    delete options.height;\n  }\n  var background = consumeOption(options, \"background\");\n  background = background && background.replace(/^#/, \"rgb:\");\n  var color = consumeOption(options, \"color\");\n  color = color && color.replace(/^#/, \"rgb:\");\n  var base_transformations = toArray(consumeOption(options, \"transformation\", []));\n  var named_transformation = [];\n  if (base_transformations.some(isObject)) {\n    base_transformations = base_transformations.map(function (tr) {\n      return utils.generate_transformation_string(isObject(tr) ? clone(tr) : {\n        transformation: tr\n      });\n    });\n  } else {\n    named_transformation = base_transformations.join(\".\");\n    base_transformations = [];\n  }\n  var effect = consumeOption(options, \"effect\");\n  if (isArray(effect)) {\n    effect = effect.join(\":\");\n  } else if (isObject(effect)) {\n    effect = entries(effect).map(function (_ref8) {\n      var _ref9 = _slicedToArray(_ref8, 2),\n        key = _ref9[0],\n        value = _ref9[1];\n      return `${key}:${value}`;\n    });\n  }\n  var border = consumeOption(options, \"border\");\n  if (isObject(border)) {\n    border = `${border.width != null ? border.width : 2}px_solid_${(border.color != null ? border.color : \"black\").replace(/^#/, 'rgb:')}`;\n  } else if (/^\\d+$/.exec(border)) {\n    // fallback to html border attributes\n    options.border = border;\n    border = void 0;\n  }\n  var flags = toArray(consumeOption(options, \"flags\")).join(\".\");\n  var dpr = consumeOption(options, \"dpr\", config().dpr);\n  if (options.offset != null) {\n    var _split_range = split_range(consumeOption(options, \"offset\"));\n    var _split_range2 = _slicedToArray(_split_range, 2);\n    options.start_offset = _split_range2[0];\n    options.end_offset = _split_range2[1];\n  }\n  if (options.start_offset) {\n    options.start_offset = normalize_expression(options.start_offset);\n  }\n  if (options.end_offset) {\n    options.end_offset = normalize_expression(options.end_offset);\n  }\n  var overlay = process_layer(consumeOption(options, \"overlay\"));\n  var radius = process_radius(consumeOption(options, \"radius\"));\n  var underlay = process_layer(consumeOption(options, \"underlay\"));\n  var ifValue = process_if(consumeOption(options, \"if\"));\n  var custom_function = process_custom_function(consumeOption(options, \"custom_function\"));\n  var custom_pre_function = process_custom_pre_function(consumeOption(options, \"custom_pre_function\"));\n  var fps = consumeOption(options, 'fps');\n  if (isArray(fps)) {\n    fps = fps.join('-');\n  }\n  var params = {\n    a: normalize_expression(angle),\n    ar: normalize_expression(consumeOption(options, \"aspect_ratio\")),\n    b: background,\n    bo: border,\n    c: crop,\n    co: color,\n    dpr: normalize_expression(dpr),\n    e: normalize_expression(effect),\n    fl: flags,\n    fn: custom_function || custom_pre_function,\n    fps: fps,\n    h: normalize_expression(height),\n    ki: normalize_expression(consumeOption(options, \"keyframe_interval\")),\n    l: overlay,\n    o: normalize_expression(consumeOption(options, \"opacity\")),\n    q: normalize_expression(consumeOption(options, \"quality\")),\n    r: radius,\n    t: named_transformation,\n    u: underlay,\n    w: normalize_expression(width),\n    x: normalize_expression(consumeOption(options, \"x\")),\n    y: normalize_expression(consumeOption(options, \"y\")),\n    z: normalize_expression(consumeOption(options, \"zoom\"))\n  };\n  SIMPLE_PARAMS.forEach(function (_ref10) {\n    var _ref11 = _slicedToArray(_ref10, 2),\n      name = _ref11[0],\n      short = _ref11[1];\n    var value = consumeOption(options, name);\n    if (value !== undefined) {\n      params[short] = value;\n    }\n  });\n  if (params.vc != null) {\n    params.vc = process_video_params(params.vc);\n  }\n  [\"so\", \"eo\", \"du\"].forEach(function (short) {\n    if (params[short] !== undefined) {\n      params[short] = norm_range_value(params[short]);\n    }\n  });\n  var variablesParam = consumeOption(options, \"variables\", []);\n  var variables = entries(options).filter(function (_ref12) {\n    var _ref13 = _slicedToArray(_ref12, 2),\n      key = _ref13[0],\n      value = _ref13[1];\n    return key.startsWith('$');\n  }).map(function (_ref14) {\n    var _ref15 = _slicedToArray(_ref14, 2),\n      key = _ref15[0],\n      value = _ref15[1];\n    delete options[key];\n    return `${key}_${normalize_expression(value)}`;\n  }).sort().concat(variablesParam.map(function (_ref16) {\n    var _ref17 = _slicedToArray(_ref16, 2),\n      name = _ref17[0],\n      value = _ref17[1];\n    return `${name}_${normalize_expression(value)}`;\n  })).join(',');\n  var transformations = entries(params).filter(function (_ref18) {\n    var _ref19 = _slicedToArray(_ref18, 2),\n      key = _ref19[0],\n      value = _ref19[1];\n    return utils.present(value);\n  }).map(function (_ref20) {\n    var _ref21 = _slicedToArray(_ref20, 2),\n      key = _ref21[0],\n      value = _ref21[1];\n    return key + '_' + value;\n  }).sort().join(',');\n  var raw_transformation = consumeOption(options, 'raw_transformation');\n  transformations = compact([ifValue, variables, transformations, raw_transformation]).join(\",\");\n  base_transformations.push(transformations);\n  transformations = base_transformations;\n  if (responsive_width) {\n    var responsive_width_transformation = config().responsive_width_transformation || DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION;\n    transformations.push(utils.generate_transformation_string(clone(responsive_width_transformation)));\n  }\n  if (String(width).startsWith(\"auto\") || responsive_width) {\n    options.responsive = true;\n  }\n  if (dpr === \"auto\") {\n    options.hidpi = true;\n  }\n  return filter(transformations, utils.present).join(\"/\");\n}\nfunction updateable_resource_params(options) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (options.access_control != null) {\n    params.access_control = utils.jsonArrayParam(options.access_control);\n  }\n  if (options.auto_tagging != null) {\n    params.auto_tagging = options.auto_tagging;\n  }\n  if (options.background_removal != null) {\n    params.background_removal = options.background_removal;\n  }\n  if (options.categorization != null) {\n    params.categorization = options.categorization;\n  }\n  if (options.context != null) {\n    params.context = utils.encode_context(options.context);\n  }\n  if (options.metadata != null) {\n    params.metadata = utils.encode_context(options.metadata);\n  }\n  if (options.custom_coordinates != null) {\n    params.custom_coordinates = encodeDoubleArray(options.custom_coordinates);\n  }\n  if (options.detection != null) {\n    params.detection = options.detection;\n  }\n  if (options.face_coordinates != null) {\n    params.face_coordinates = encodeDoubleArray(options.face_coordinates);\n  }\n  if (options.headers != null) {\n    params.headers = utils.build_custom_headers(options.headers);\n  }\n  if (options.notification_url != null) {\n    params.notification_url = options.notification_url;\n  }\n  if (options.ocr != null) {\n    params.ocr = options.ocr;\n  }\n  if (options.raw_convert != null) {\n    params.raw_convert = options.raw_convert;\n  }\n  if (options.similarity_search != null) {\n    params.similarity_search = options.similarity_search;\n  }\n  if (options.tags != null) {\n    params.tags = toArray(options.tags).join(\",\");\n  }\n  if (options.quality_override != null) {\n    params.quality_override = options.quality_override;\n  }\n  if (options.asset_folder != null) {\n    params.asset_folder = options.asset_folder;\n  }\n  if (options.display_name != null) {\n    params.display_name = options.display_name;\n  }\n  if (options.unique_display_name != null) {\n    params.unique_display_name = options.unique_display_name;\n  }\n  return params;\n}\n\n/**\n * A list of keys used by the url() function.\n * @private\n */\nvar URL_KEYS = ['api_secret', 'auth_token', 'cdn_subdomain', 'cloud_name', 'cname', 'format', 'long_url_signature', 'private_cdn', 'resource_type', 'secure', 'secure_cdn_subdomain', 'secure_distribution', 'shorten', 'sign_url', 'ssl_detected', 'type', 'url_suffix', 'use_root_path', 'version'];\n\n/**\n * Create a new object with only URL parameters\n * @param {object} options The source object\n * @return {Object} An object containing only URL parameters\n */\n\nfunction extractUrlParams(options) {\n  return pickOnlyExistingValues.apply(undefined, [options].concat(URL_KEYS));\n}\n\n/**\n * Create a new object with only transformation parameters\n * @param {object} options The source object\n * @return {Object} An object containing only transformation parameters\n */\n\nfunction extractTransformationParams(options) {\n  return pickOnlyExistingValues.apply(undefined, [options].concat(_toConsumableArray(TRANSFORMATION_PARAMS)));\n}\n\n/**\n * Handle the format parameter for fetch urls\n * @private\n * @param options url and transformation options. This argument may be changed by the function!\n */\n\nfunction patchFetchFormat() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (options.type === \"fetch\") {\n    if (options.fetch_format == null) {\n      options.fetch_format = consumeOption(options, \"format\");\n    }\n  }\n}\nfunction url(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var signature = void 0,\n    source_to_sign = void 0;\n  utils.patchFetchFormat(options);\n  var type = consumeOption(options, \"type\", null);\n  var transformation = utils.generate_transformation_string(options);\n  var resource_type = consumeOption(options, \"resource_type\", \"image\");\n  var version = consumeOption(options, \"version\");\n  var force_version = consumeOption(options, \"force_version\", config().force_version);\n  if (force_version == null) {\n    force_version = true;\n  }\n  var long_url_signature = !!consumeOption(options, \"long_url_signature\", config().long_url_signature);\n  var format = consumeOption(options, \"format\");\n  var cloud_name = consumeOption(options, \"cloud_name\", config().cloud_name);\n  if (!cloud_name) {\n    throw \"Unknown cloud_name\";\n  }\n  var private_cdn = consumeOption(options, \"private_cdn\", config().private_cdn);\n  var secure_distribution = consumeOption(options, \"secure_distribution\", config().secure_distribution);\n  var secure = consumeOption(options, \"secure\", null);\n  var ssl_detected = consumeOption(options, \"ssl_detected\", config().ssl_detected);\n  if (secure === null) {\n    secure = ssl_detected || config().secure;\n  }\n  var cdn_subdomain = consumeOption(options, \"cdn_subdomain\", config().cdn_subdomain);\n  var secure_cdn_subdomain = consumeOption(options, \"secure_cdn_subdomain\", config().secure_cdn_subdomain);\n  var cname = consumeOption(options, \"cname\", config().cname);\n  var shorten = consumeOption(options, \"shorten\", config().shorten);\n  var sign_url = consumeOption(options, \"sign_url\", config().sign_url);\n  var api_secret = consumeOption(options, \"api_secret\", config().api_secret);\n  var url_suffix = consumeOption(options, \"url_suffix\");\n  var use_root_path = consumeOption(options, \"use_root_path\", config().use_root_path);\n  var signature_algorithm = consumeOption(options, \"signature_algorithm\", config().signature_algorithm || DEFAULT_SIGNATURE_ALGORITHM);\n  if (long_url_signature) {\n    signature_algorithm = 'sha256';\n  }\n  var auth_token = consumeOption(options, \"auth_token\");\n  if (auth_token !== false) {\n    auth_token = exports.merge(config().auth_token, auth_token);\n  }\n  var preloaded = /^(image|raw)\\/([a-z0-9_]+)\\/v(\\d+)\\/([^#]+)$/.exec(public_id);\n  if (preloaded) {\n    resource_type = preloaded[1];\n    type = preloaded[2];\n    version = preloaded[3];\n    public_id = preloaded[4];\n  }\n  var original_source = public_id;\n  if (public_id == null) {\n    return original_source;\n  }\n  public_id = public_id.toString();\n  if (type === null && public_id.match(/^https?:\\//i)) {\n    return original_source;\n  }\n  var _finalize_resource_ty = finalize_resource_type(resource_type, type, url_suffix, use_root_path, shorten);\n  var _finalize_resource_ty2 = _slicedToArray(_finalize_resource_ty, 2);\n  resource_type = _finalize_resource_ty2[0];\n  type = _finalize_resource_ty2[1];\n  var _finalize_source = finalize_source(public_id, format, url_suffix);\n  var _finalize_source2 = _slicedToArray(_finalize_source, 2);\n  public_id = _finalize_source2[0];\n  source_to_sign = _finalize_source2[1];\n  if (version == null && force_version && source_to_sign.indexOf(\"/\") >= 0 && !source_to_sign.match(/^v[0-9]+/) && !source_to_sign.match(/^https?:\\//)) {\n    version = 1;\n  }\n  if (version != null) {\n    version = `v${version}`;\n  } else {\n    version = null;\n  }\n  transformation = transformation.replace(/([^:])\\/\\//g, '$1/');\n  if (sign_url && isEmpty(auth_token)) {\n    var to_sign = [transformation, source_to_sign].filter(function (part) {\n      return part != null && part !== '';\n    }).join('/');\n    try {\n      for (var i = 0; to_sign !== decodeURIComponent(to_sign) && i < 10; i++) {\n        to_sign = decodeURIComponent(to_sign);\n      }\n      // eslint-disable-next-line no-empty\n    } catch (error) {}\n    var hash = computeHash(to_sign + api_secret, signature_algorithm, 'base64');\n    signature = hash.replace(/\\//g, '_').replace(/\\+/g, '-').substring(0, long_url_signature ? 32 : 8);\n    signature = `s--${signature}--`;\n  }\n  var prefix = unsigned_url_prefix(public_id, cloud_name, private_cdn, cdn_subdomain, secure_cdn_subdomain, cname, secure, secure_distribution);\n  var resultUrl = [prefix, resource_type, type, signature, transformation, version, public_id].filter(function (part) {\n    return part != null && part !== '';\n  }).join('/').replace(/ /g, '%20');\n  if (sign_url && !isEmpty(auth_token)) {\n    auth_token.url = urlParse(resultUrl).path;\n    var token = generate_token(auth_token);\n    resultUrl += `?${token}`;\n  }\n  var urlAnalytics = ensureOption(options, 'urlAnalytics', false);\n  if (urlAnalytics === true) {\n    var _getSDKVersions = getSDKVersions(),\n      sdkCode = _getSDKVersions.sdkCode,\n      sdkSemver = _getSDKVersions.sdkSemver,\n      techVersion = _getSDKVersions.techVersion;\n    var sdkVersions = {\n      sdkCode: ensureOption(options, 'sdkCode', sdkCode),\n      sdkSemver: ensureOption(options, 'sdkSemver', sdkSemver),\n      techVersion: ensureOption(options, 'techVersion', techVersion)\n    };\n    var analyticsOptions = getAnalyticsOptions(Object.assign({}, options, sdkVersions));\n    var sdkAnalyticsSignature = getSDKAnalyticsSignature(analyticsOptions);\n\n    // url might already have a '?' query param\n    var appender = '?';\n    if (resultUrl.indexOf('?') >= 0) {\n      appender = '&';\n    }\n    resultUrl = `${resultUrl}${appender}_a=${sdkAnalyticsSignature}`;\n  }\n  return resultUrl;\n}\nfunction video_url(public_id, options) {\n  options = extend({\n    resource_type: 'video'\n  }, options);\n  return utils.url(public_id, options);\n}\nfunction finalize_source(source, format, url_suffix) {\n  var source_to_sign = void 0;\n  source = source.replace(/([^:])\\/\\//g, '$1/');\n  if (source.match(/^https?:\\//i)) {\n    source = smart_escape(source);\n    source_to_sign = source;\n  } else {\n    source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n    source_to_sign = source;\n    if (url_suffix) {\n      if (url_suffix.match(/[\\.\\/]/)) {\n        throw new Error('url_suffix should not include . or /');\n      }\n      source = source + '/' + url_suffix;\n    }\n    if (format != null) {\n      source = source + '.' + format;\n      source_to_sign = source_to_sign + '.' + format;\n    }\n  }\n  return [source, source_to_sign];\n}\nfunction video_thumbnail_url(public_id, options) {\n  options = extend({}, DEFAULT_POSTER_OPTIONS, options);\n  return utils.url(public_id, options);\n}\nfunction finalize_resource_type(resource_type, type, url_suffix, use_root_path, shorten) {\n  if (type == null) {\n    type = 'upload';\n  }\n  if (url_suffix != null) {\n    if (resource_type === 'image' && type === 'upload') {\n      resource_type = \"images\";\n      type = null;\n    } else if (resource_type === 'image' && type === 'private') {\n      resource_type = 'private_images';\n      type = null;\n    } else if (resource_type === 'image' && type === 'authenticated') {\n      resource_type = 'authenticated_images';\n      type = null;\n    } else if (resource_type === 'raw' && type === 'upload') {\n      resource_type = 'files';\n      type = null;\n    } else if (resource_type === 'video' && type === 'upload') {\n      resource_type = 'videos';\n      type = null;\n    } else {\n      throw new Error(\"URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload\");\n    }\n  }\n  if (use_root_path) {\n    if (resource_type === 'image' && type === 'upload' || resource_type === 'images' && type == null) {\n      resource_type = null;\n      type = null;\n    } else {\n      throw new Error(\"Root path only supported for image/upload\");\n    }\n  }\n  if (shorten && resource_type === 'image' && type === 'upload') {\n    resource_type = 'iu';\n    type = null;\n  }\n  return [resource_type, type];\n}\n// cdn_subdomain and secure_cdn_subdomain\n// 1) Customers in shared distribution (e.g. res.cloudinary.com)\n//    if cdn_domain is true uses res-[1-5].cloudinary.com for both http and https.\n//    Setting secure_cdn_subdomain to false disables this for https.\n// 2) Customers with private cdn\n//    if cdn_domain is true uses cloudname-res-[1-5].cloudinary.com for http\n//    if secure_cdn_domain is true uses cloudname-res-[1-5].cloudinary.com for https\n//      (please contact support if you require this)\n// 3) Customers with cname\n//    if cdn_domain is true uses a[1-5].cname for http.\n//    For https, uses the same naming scheme as 1 for shared distribution and as 2 for private distribution.\n\nfunction unsigned_url_prefix(source, cloud_name, private_cdn, cdn_subdomain, secure_cdn_subdomain, cname, secure, secure_distribution) {\n  var prefix = void 0;\n  if (cloud_name.indexOf(\"/\") === 0) {\n    return '/res' + cloud_name;\n  }\n  var shared_domain = !private_cdn;\n  if (secure) {\n    if (secure_distribution == null || secure_distribution === exports.OLD_AKAMAI_SHARED_CDN) {\n      secure_distribution = private_cdn ? cloud_name + \"-res.cloudinary.com\" : exports.SHARED_CDN;\n    }\n    if (shared_domain == null) {\n      shared_domain = secure_distribution === exports.SHARED_CDN;\n    }\n    if (secure_cdn_subdomain == null && shared_domain) {\n      secure_cdn_subdomain = cdn_subdomain;\n    }\n    if (secure_cdn_subdomain) {\n      secure_distribution = secure_distribution.replace('res.cloudinary.com', 'res-' + (crc32(source) % 5 + 1 + '.cloudinary.com'));\n    }\n    prefix = 'https://' + secure_distribution;\n  } else if (cname) {\n    var subdomain = cdn_subdomain ? 'a' + (crc32(source) % 5 + 1) + '.' : '';\n    prefix = 'http://' + subdomain + cname;\n  } else {\n    var cdn_part = private_cdn ? cloud_name + '-' : '';\n    var subdomain_part = cdn_subdomain ? '-' + (crc32(source) % 5 + 1) : '';\n    var host = [cdn_part, 'res', subdomain_part, '.cloudinary.com'].join('');\n    prefix = 'http://' + host;\n  }\n  if (shared_domain) {\n    prefix += '/' + cloud_name;\n  }\n  return prefix;\n}\nfunction base_api_url() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var cloudinary = ensureOption(options, \"upload_prefix\", UPLOAD_PREFIX);\n  var cloud_name = ensureOption(options, \"cloud_name\");\n  var encode_path = function encode_path(unencoded_path) {\n    return encodeURIComponent(unencoded_path).replace(\"'\", '%27');\n  };\n  var encoded_path = Array.isArray(path) ? path.map(encode_path) : encode_path(path);\n  return [cloudinary, \"v1_1\", cloud_name].concat(encoded_path).join(\"/\");\n}\nfunction api_url() {\n  var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'upload';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var resource_type = options.resource_type || \"image\";\n  return base_api_url([resource_type, action], options);\n}\nfunction random_public_id() {\n  return crypto.randomBytes(12).toString('base64').replace(/[^a-z0-9]/g, \"\");\n}\nfunction signed_preloaded_image(result) {\n  return `${result.resource_type}/upload/v${result.version}/${filter([result.public_id, result.format], utils.present).join(\".\")}#${result.signature}`;\n}\nfunction api_sign_request(params_to_sign, api_secret) {\n  var to_sign = entries(params_to_sign).filter(function (_ref22) {\n    var _ref23 = _slicedToArray(_ref22, 2),\n      k = _ref23[0],\n      v = _ref23[1];\n    return utils.present(v);\n  }).map(function (_ref24) {\n    var _ref25 = _slicedToArray(_ref24, 2),\n      k = _ref25[0],\n      v = _ref25[1];\n    return `${k}=${toArray(v).join(\",\")}`;\n  }).sort().join(\"&\");\n  return computeHash(to_sign + api_secret, config().signature_algorithm || DEFAULT_SIGNATURE_ALGORITHM, 'hex');\n}\n\n/**\n * Computes hash from input string using specified algorithm.\n * @private\n * @param {string} input string which to compute hash from\n * @param {string} signature_algorithm algorithm to use for computing hash\n * @param {string} encoding type of encoding\n * @return {string} computed hash value\n */\nfunction computeHash(input, signature_algorithm, encoding) {\n  if (!SUPPORTED_SIGNATURE_ALGORITHMS.includes(signature_algorithm)) {\n    throw new Error(`Signature algorithm ${signature_algorithm} is not supported. Supported algorithms: ${SUPPORTED_SIGNATURE_ALGORITHMS.join(', ')}`);\n  }\n  var hash = crypto.createHash(signature_algorithm);\n  hash.update(utf8_encode(input), 'binary');\n  return hash.digest(encoding);\n}\nfunction clear_blank(hash) {\n  var filtered_hash = {};\n  entries(hash).filter(function (_ref26) {\n    var _ref27 = _slicedToArray(_ref26, 2),\n      k = _ref27[0],\n      v = _ref27[1];\n    return utils.present(v);\n  }).forEach(function (_ref28) {\n    var _ref29 = _slicedToArray(_ref28, 2),\n      k = _ref29[0],\n      v = _ref29[1];\n    filtered_hash[k] = v.filter ? v.filter(function (x) {\n      return x;\n    }) : v;\n  });\n  return filtered_hash;\n}\nfunction merge(hash1, hash2) {\n  return _extends({}, hash1, hash2);\n}\nfunction sign_request(params) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var apiKey = ensureOption(options, 'api_key');\n  var apiSecret = ensureOption(options, 'api_secret');\n  params = exports.clear_blank(params);\n  params.signature = exports.api_sign_request(params, apiSecret);\n  params.api_key = apiKey;\n  return params;\n}\nfunction webhook_signature(data, timestamp) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  ensurePresenceOf({\n    data,\n    timestamp\n  });\n  var api_secret = ensureOption(options, 'api_secret');\n  var signature_algorithm = ensureOption(options, 'signature_algorithm', DEFAULT_SIGNATURE_ALGORITHM);\n  return computeHash(data + timestamp + api_secret, signature_algorithm, 'hex');\n}\n\n/**\n * Verifies the authenticity of a notification signature\n *\n * @param {string} body JSON of the request's body\n * @param {number} timestamp Unix timestamp in seconds. Can be retrieved from the X-Cld-Timestamp header\n * @param {string} signature Actual signature. Can be retrieved from the X-Cld-Signature header\n * @param {number} [valid_for=7200] The desired time in seconds for considering the request valid\n *\n * @return {boolean}\n */\nfunction verifyNotificationSignature(body, timestamp, signature) {\n  var valid_for = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 7200;\n\n  // verify that signature is valid for the given timestamp\n  if (timestamp < Math.round(Date.now() / 1000) - valid_for) {\n    return false;\n  }\n  var payload_hash = utils.webhook_signature(body, timestamp, {\n    api_secret: config().api_secret,\n    signature_algorithm: config().signature_algorithm\n  });\n  return signature === payload_hash;\n}\nfunction process_request_params(params, options) {\n  if (options.unsigned != null && options.unsigned) {\n    params = exports.clear_blank(params);\n    delete params.timestamp;\n  } else if (options.oauth_token || config().oauth_token) {\n    params = exports.clear_blank(params);\n  } else if (options.signature) {\n    params = exports.clear_blank(options);\n  } else {\n    params = exports.sign_request(params, options);\n  }\n  return params;\n}\nfunction private_download_url(public_id, format) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    public_id: public_id,\n    format: format,\n    type: options.type,\n    attachment: options.attachment,\n    expires_at: options.expires_at\n  }, options);\n  return exports.api_url(\"download\", options) + \"?\" + querystring.stringify(params);\n}\n\n/**\n * Utility method that uses the deprecated ZIP download API.\n * @deprecated Replaced by {download_zip_url} that uses the more advanced and robust archive generation and download API\n */\n\nfunction zip_download_url(tag) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    tag: tag,\n    transformation: utils.generate_transformation_string(options)\n  }, options);\n  return exports.api_url(\"download_tag.zip\", options) + \"?\" + hashToQuery(params);\n}\n\n/**\n * The returned url should allow downloading the backedup asset based on the\n * version and asset id\n * asset and version id are returned with resource(<PUBLIC_ID1>, { versions: true })\n * @param asset_id\n * @param version_id\n * @param options\n * @returns {string }\n */\nfunction download_backedup_asset(asset_id, version_id) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    asset_id: asset_id,\n    version_id: version_id\n  }, options);\n  return exports.base_api_url(['download_backup'], options) + \"?\" + hashToQuery(params);\n}\n\n/**\n * Utility method to create a signed URL for specified resources.\n * @param action\n * @param params\n * @param options\n */\nfunction api_download_url(action, params, options) {\n  var download_params = _extends({}, params, {\n    mode: \"download\"\n  });\n  var cloudinary_params = exports.sign_request(download_params, options);\n  return exports.api_url(action, options) + \"?\" + hashToQuery(cloudinary_params);\n}\n\n/**\n * Returns a URL that when invokes creates an archive and returns it.\n * @param {object} options\n * @param {string} [options.resource_type=\"image\"] The resource type of files to include in the archive.\n *   Must be one of :image | :video | :raw\n * @param {string} [options.type=\"upload\"] The specific file type of resources: :upload|:private|:authenticated\n * @param {string|Array} [options.tags] list of tags to include in the archive\n * @param {string|Array<string>} [options.public_ids] list of public_ids to include in the archive\n * @param {string|Array<string>} [options.prefixes]  list of prefixes of public IDs (e.g., folders).\n * @param {string|Array<string>} [options.fully_qualified_public_ids] list of fully qualified public_ids to include\n *   in the archive.\n * @param {string|Array<string>} [options.transformations]  list of transformations.\n *   The derived images of the given transformations are included in the archive. Using the string representation of\n *   multiple chained transformations as we use for the 'eager' upload parameter.\n * @param {string} [options.mode=\"create\"] return the generated archive file or to store it as a raw resource and\n *   return a JSON with URLs for accessing the archive. Possible values: :download, :create\n * @param {string} [options.target_format=\"zip\"]\n * @param {string} [options.target_public_id]  public ID of the generated raw resource.\n *   Relevant only for the create mode. If not specified, random public ID is generated.\n * @param {boolean} [options.flatten_folders=false] If true, flatten public IDs with folders to be in the root\n *   of the archive. Add numeric counter to the file name in case of a name conflict.\n * @param {boolean} [options.flatten_transformations=false] If true, and multiple transformations are given,\n *   flatten the folder structure of derived images and store the transformation details on the file name instead.\n * @param {boolean} [options.use_original_filename] Use the original file name of included images\n *   (if available) instead of the public ID.\n * @param {boolean} [options.async=false] If true, return immediately and perform archive creation in the background.\n *   Relevant only for the create mode.\n * @param {string} [options.notification_url] URL to send an HTTP post request (webhook) to when the\n *   archive creation is completed.\n * @param {string|Array<string>} [options.target_tags=] Allows assigning one or more tags to the generated archive file\n *   (for later housekeeping via the admin API).\n * @param {string} [options.keep_derived=false] keep the derived images used for generating the archive\n * @return {String} archive url\n */\nfunction download_archive_url() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var params = exports.archive_params(merge(options, {\n    mode: \"download\"\n  }));\n  return api_download_url(\"generate_archive\", params, options);\n}\n\n/**\n * Returns a URL that when invokes creates an zip archive and returns it.\n * @see download_archive_url\n */\n\nfunction download_zip_url() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return exports.download_archive_url(merge(options, {\n    target_format: \"zip\"\n  }));\n}\n\n/**\n * Creates and returns a URL that when invoked creates an archive of a folder\n * @param {string} folder_path Full path (from the root) of the folder to download\n * @param {object} options Additional options\n * @returns {string} Url for downloading an archive of a folder\n */\nfunction download_folder(folder_path) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  options.resource_type = options.resource_type || \"all\";\n  options.prefixes = folder_path;\n  var cloudinary_params = exports.sign_request(exports.archive_params(merge(options, {\n    mode: \"download\"\n  })), options);\n  return exports.api_url(\"generate_archive\", options) + \"?\" + hashToQuery(cloudinary_params);\n}\n\n/**\n * Render the key/value pair as an HTML tag attribute\n * @private\n * @param {string} key\n * @param {string|boolean|number} [value]\n * @return {string} A string representing the HTML attribute\n */\nfunction join_pair(key, value) {\n  if (!value) {\n    return void 0;\n  }\n  return value === true ? key : key + \"='\" + value + \"'\";\n}\n\n/**\n * If the given value is a string, replaces single or double quotes with character entities\n * @private\n * @param {*} value The string to encode quotes in\n * @return {*} Encoded string or original value if not a string\n */\nfunction escapeQuotes(value) {\n  return isString(value) ? value.replace(/\\\"/g, '&#34;').replace(/\\'/g, '&#39;') : value;\n}\n\n/**\n *\n * @param attrs\n * @return {*}\n */\nexports.html_attrs = function html_attrs(attrs) {\n  return filter(map(attrs, function (value, key) {\n    return join_pair(key, escapeQuotes(value));\n  })).sort().join(\" \");\n};\nvar CLOUDINARY_JS_CONFIG_PARAMS = ['api_key', 'cloud_name', 'private_cdn', 'secure_distribution', 'cdn_subdomain'];\nfunction cloudinary_js_config() {\n  var params = pickOnlyExistingValues.apply(undefined, [config()].concat(CLOUDINARY_JS_CONFIG_PARAMS));\n  return `<script type='text/javascript'>\\n$.cloudinary.config(${JSON.stringify(params)});\\n</script>`;\n}\nfunction v1_result_adapter(callback) {\n  if (callback == null) {\n    return undefined;\n  }\n  return function (result) {\n    if (result.error != null) {\n      return callback(result.error);\n    }\n    return callback(void 0, result);\n  };\n}\nfunction v1_adapter(name, num_pass_args, v1) {\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var pass_args = take(args, num_pass_args);\n    var options = args[num_pass_args];\n    var callback = args[num_pass_args + 1];\n    if (callback == null && isFunction(options)) {\n      callback = options;\n      options = {};\n    }\n    callback = v1_result_adapter(callback);\n    args = pass_args.concat([callback, options]);\n    return v1[name].apply(this, args);\n  };\n}\nfunction v1_adapters(exports, v1, mapping) {\n  return Object.keys(mapping).map(function (name) {\n    var num_pass_args = mapping[name];\n    exports[name] = v1_adapter(name, num_pass_args, v1);\n    return exports[name];\n  });\n}\nfunction as_safe_bool(value) {\n  if (value == null) {\n    return void 0;\n  }\n  if (value === true || value === 'true' || value === '1') {\n    value = 1;\n  }\n  if (value === false || value === 'false' || value === '0') {\n    value = 0;\n  }\n  return value;\n}\nvar NUMBER_PATTERN = \"([0-9]*)\\\\.([0-9]+)|([0-9]+)\";\nvar OFFSET_ANY_PATTERN = `(${NUMBER_PATTERN})([%pP])?`;\nvar RANGE_VALUE_RE = RegExp(`^${OFFSET_ANY_PATTERN}$`);\nvar OFFSET_ANY_PATTERN_RE = RegExp(`(${OFFSET_ANY_PATTERN})\\\\.\\\\.(${OFFSET_ANY_PATTERN})`);\n\n// Split a range into the start and end values\nfunction split_range(range) {\n  // :nodoc:\n  switch (range.constructor) {\n    case String:\n      if (!OFFSET_ANY_PATTERN_RE.test(range)) {\n        return range;\n      }\n      return range.split(\"..\");\n    case Array:\n      return [first(range), last(range)];\n    default:\n      return [null, null];\n  }\n}\nfunction norm_range_value(value) {\n  // :nodoc:\n  var offset = String(value).match(RANGE_VALUE_RE);\n  if (offset) {\n    var modifier = offset[5] ? 'p' : '';\n    value = `${offset[1] || offset[4]}${modifier}`;\n  }\n  return value;\n}\n\n/**\n * A video codec parameter can be either a String or a Hash.\n * @param {Object} param <code>vc_<codec>[ : <profile> : [<level>]]</code>\n *                       or <code>{ codec: 'h264', profile: 'basic', level: '3.1' }</code>\n * @return {String} <code><codec> : <profile> : [<level>]]</code> if a Hash was provided\n *                   or the param if a String was provided.\n *                   Returns null if param is not a Hash or String\n */\nfunction process_video_params(param) {\n  switch (param.constructor) {\n    case Object:\n      {\n        var video = \"\";\n        if ('codec' in param) {\n          video = param.codec;\n          if ('profile' in param) {\n            video += \":\" + param.profile;\n            if ('level' in param) {\n              video += \":\" + param.level;\n            }\n          }\n        }\n        return video;\n      }\n    case String:\n      return param;\n    default:\n      return null;\n  }\n}\n/**\n * Returns a Hash of parameters used to create an archive\n * @private\n * @param {object} options\n * @return {object} Archive API parameters\n */\n\nfunction archive_params() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    allow_missing: exports.as_safe_bool(options.allow_missing),\n    async: exports.as_safe_bool(options.async),\n    expires_at: options.expires_at,\n    flatten_folders: exports.as_safe_bool(options.flatten_folders),\n    flatten_transformations: exports.as_safe_bool(options.flatten_transformations),\n    keep_derived: exports.as_safe_bool(options.keep_derived),\n    mode: options.mode,\n    notification_url: options.notification_url,\n    prefixes: options.prefixes && toArray(options.prefixes),\n    fully_qualified_public_ids: options.fully_qualified_public_ids && toArray(options.fully_qualified_public_ids),\n    public_ids: options.public_ids && toArray(options.public_ids),\n    skip_transformation_name: exports.as_safe_bool(options.skip_transformation_name),\n    tags: options.tags && toArray(options.tags),\n    target_format: options.target_format,\n    target_public_id: options.target_public_id,\n    target_tags: options.target_tags && toArray(options.target_tags),\n    timestamp: options.timestamp || exports.timestamp(),\n    transformations: utils.build_eager(options.transformations),\n    type: options.type,\n    use_original_filename: exports.as_safe_bool(options.use_original_filename)\n  };\n}\nexports.create_source_tag = function create_source_tag(src, source_type) {\n  var codecs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var video_type = source_type === 'ogv' ? 'ogg' : source_type;\n  var mime_type = `video/${video_type}`;\n  if (!isEmpty(codecs)) {\n    var codecs_str = isArray(codecs) ? codecs.join(', ') : codecs;\n    mime_type += `; codecs=${codecs_str}`;\n  }\n  return `<source ${utils.html_attrs({\n    src,\n    type: mime_type\n  })}>`;\n};\nfunction build_explicit_api_params(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return [exports.build_upload_params(extend({}, {\n    public_id\n  }, options))];\n}\nfunction generate_responsive_breakpoints_string(breakpoints) {\n  if (breakpoints == null) {\n    return null;\n  }\n  breakpoints = clone(breakpoints);\n  if (!isArray(breakpoints)) {\n    breakpoints = [breakpoints];\n  }\n  for (var j = 0; j < breakpoints.length; j++) {\n    var breakpoint_settings = breakpoints[j];\n    if (breakpoint_settings != null) {\n      if (breakpoint_settings.transformation) {\n        breakpoint_settings.transformation = utils.generate_transformation_string(clone(breakpoint_settings.transformation));\n      }\n    }\n  }\n  return JSON.stringify(breakpoints);\n}\nfunction build_streaming_profiles_param() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var params = pickOnlyExistingValues(options, \"display_name\", \"representations\");\n  if (isArray(params.representations)) {\n    params.representations = JSON.stringify(params.representations.map(function (r) {\n      return {\n        transformation: utils.generate_transformation_string(r.transformation)\n      };\n    }));\n  }\n  return params;\n}\nfunction hashToParameters(hash) {\n  return entries(hash).reduce(function (parameters, _ref30) {\n    var _ref31 = _slicedToArray(_ref30, 2),\n      key = _ref31[0],\n      value = _ref31[1];\n    if (isArray(value)) {\n      key = key.endsWith('[]') ? key : key + '[]';\n      var items = value.map(function (v) {\n        return [key, v];\n      });\n      parameters = parameters.concat(items);\n    } else {\n      parameters.push([key, value]);\n    }\n    return parameters;\n  }, []);\n}\n\n/**\n * Convert a hash of values to a URI query string.\n * Array values are spread as individual parameters.\n * @param {object} hash Key-value parameters\n * @return {string} A URI query string.\n */\nfunction hashToQuery(hash) {\n  return hashToParameters(hash).map(function (_ref32) {\n    var _ref33 = _slicedToArray(_ref32, 2),\n      key = _ref33[0],\n      value = _ref33[1];\n    return `${querystring.escape(key)}=${querystring.escape(value)}`;\n  }).join('&');\n}\n\n/**\n * Verify that the parameter `value` is defined and it's string value is not zero.\n * <br>This function should not be confused with `isEmpty()`.\n * @private\n * @param {string|number} value The value to check.\n * @return {boolean} True if the value is defined and not empty.\n */\n\nfunction present(value) {\n  return value != null && (\"\" + value).length > 0;\n}\n\n/**\n * Returns a new object with key values from source based on the keys.\n * `null` or `undefined` values are not copied.\n * @private\n * @param {object} source The object to pick values from.\n * @param {...string} keys One or more keys to copy from source.\n * @return {object} A new object with the required keys and values.\n */\n\nfunction pickOnlyExistingValues(source) {\n  var result = {};\n  if (source) {\n    for (var _len2 = arguments.length, keys = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      keys[_key2 - 1] = arguments[_key2];\n    }\n    keys.forEach(function (key) {\n      if (source[key] != null) {\n        result[key] = source[key];\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Returns a JSON array as String.\n * Yields the array before it is converted to JSON format\n * @private\n * @param {object|String|Array<object>} data\n * @param {function(*):*} [modifier] called with the array before the array is stringified\n * @return {String|null} a JSON array string or `null` if data is `null`\n */\n\nfunction jsonArrayParam(data, modifier) {\n  if (!data) {\n    return null;\n  }\n  if (isString(data)) {\n    data = JSON.parse(data);\n  }\n  if (!isArray(data)) {\n    data = [data];\n  }\n  if (isFunction(modifier)) {\n    data = modifier(data);\n  }\n  return JSON.stringify(data);\n}\nfunction optionalRequire(moduleName) {\n  var module = void 0;\n  try {\n    module = require(moduleName);\n    return module;\n  } catch (e) {\n    if (e.code === \"MODULE_NOT_FOUND\") {\n      return null;\n    }\n    throw e;\n  }\n}\n\n/**\n * Empty function - do nothing\n *\n */\nexports.NOP = function () {};\nexports.generate_auth_token = generate_auth_token;\nexports.getUserAgent = getUserAgent;\nexports.build_upload_params = build_upload_params;\nexports.build_multi_and_sprite_params = build_multi_and_sprite_params;\nexports.api_download_url = api_download_url;\nexports.timestamp = function () {\n  return Math.floor(new Date().getTime() / 1000);\n};\nexports.option_consume = consumeOption; // for backwards compatibility\nexports.build_array = toArray; // for backwards compatibility\nexports.encode_double_array = encodeDoubleArray;\nexports.encode_key_value = encode_key_value;\nexports.encode_context = encode_context;\nexports.build_eager = build_eager;\nexports.build_custom_headers = build_custom_headers;\nexports.generate_transformation_string = generate_transformation_string;\nexports.updateable_resource_params = updateable_resource_params;\nexports.extractUrlParams = extractUrlParams;\nexports.extractTransformationParams = extractTransformationParams;\nexports.patchFetchFormat = patchFetchFormat;\nexports.url = url;\nexports.video_url = video_url;\nexports.video_thumbnail_url = video_thumbnail_url;\nexports.api_url = api_url;\nexports.random_public_id = random_public_id;\nexports.signed_preloaded_image = signed_preloaded_image;\nexports.api_sign_request = api_sign_request;\nexports.clear_blank = clear_blank;\nexports.merge = merge;\nexports.sign_request = sign_request;\nexports.webhook_signature = webhook_signature;\nexports.verifyNotificationSignature = verifyNotificationSignature;\nexports.process_request_params = process_request_params;\nexports.private_download_url = private_download_url;\nexports.zip_download_url = zip_download_url;\nexports.download_archive_url = download_archive_url;\nexports.download_zip_url = download_zip_url;\nexports.cloudinary_js_config = cloudinary_js_config;\nexports.v1_adapters = v1_adapters;\nexports.as_safe_bool = as_safe_bool;\nexports.archive_params = archive_params;\nexports.build_explicit_api_params = build_explicit_api_params;\nexports.generate_responsive_breakpoints_string = generate_responsive_breakpoints_string;\nexports.build_streaming_profiles_param = build_streaming_profiles_param;\nexports.hashToParameters = hashToParameters;\nexports.present = present;\nexports.only = pickOnlyExistingValues; // for backwards compatibility\nexports.pickOnlyExistingValues = pickOnlyExistingValues;\nexports.jsonArrayParam = jsonArrayParam;\nexports.download_folder = download_folder;\nexports.base_api_url = base_api_url;\nexports.download_backedup_asset = download_backedup_asset;\nexports.optionalRequire = optionalRequire;\n\n// was exported before, so kept for backwards compatibility\nexports.DEFAULT_POSTER_OPTIONS = DEFAULT_POSTER_OPTIONS;\nexports.DEFAULT_VIDEO_SOURCE_TYPES = DEFAULT_VIDEO_SOURCE_TYPES;\nObject.assign(module.exports, {\n  normalize_expression,\n  at,\n  clone,\n  extend,\n  filter,\n  includes,\n  isArray,\n  isEmpty,\n  isNumber,\n  isObject,\n  isRemoteUrl,\n  isString,\n  isUndefined,\n  keys: function keys(source) {\n    return Object.keys(source);\n  },\n  ensurePresenceOf\n});","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","err","Array","isArray","TypeError","_toConsumableArray","arr2","from","crypto","require","querystring","urlParse","parse","compact","first","isFunction","isPlainObject","last","map","take","at","clone","extend","filter","includes","isEmpty","isNumber","isObject","isString","isUndefined","smart_escape","consumeOption","toArray","_require","base64EncodeURL","encodeDoubleArray","config","generate_token","utf8_encode","crc32","ensurePresenceOf","ensureOption","defaults","entries","isRemoteUrl","getSDKVersions","_require$Util","Util","getAnalyticsOptions","getSDKAnalyticsSignature","exports","module","utils","VERSION","version","error","generate_auth_token","options","token_options","auth_token","CF_SHARED_CDN","OLD_AKAMAI_SHARED_CDN","AKAMAI_SHARED_CDN","SHARED_CDN","USER_AGENT","process","versions","node","userPlatform","getUserAgent","_require2","DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION","DEFAULT_POSTER_OPTIONS","DEFAULT_VIDEO_SOURCE_TYPES","CONDITIONAL_OPERATORS","PREDEFINED_VARS","LAYER_KEYWORD_PARAMS","TRANSFORMATION_PARAMS","SIMPLE_PARAMS","UPLOAD_PREFIX","SUPPORTED_SIGNATURE_ALGORITHMS","DEFAULT_SIGNATURE_ALGORITHM","textStyle","layer","keywords","style","text_style","keys","forEach","attr","default_value","attr_value","split","pop","font_size","font_family","unshift","join","normalize_expression","expression","match","operators","operatorsPattern","operatorsReplaceRE","RegExp","replace","predefinedVarsPattern","v","userVariablePattern","variablesReplaceRE","process_custom_function","customFunction","function_type","encodedSource","process_custom_pre_function","customPreFunction","result","process_if","ifValue","process_layer","resource_type","url","public_id","format","type","text","components","noPublicId","noStyle","re","start","textSource","decodeURIComponent","res","exec","slice","index","encodeURIComponent","test","substr","process_radius","radius","Error","findIndex","x","build_multi_and_sprite_params","tagOrOptions","tag","urls","transformation","generate_transformation_string","fetch_format","timestamp","async","notification_url","build_upload_params","params","access_mode","allowed_formats","asset_folder","as_safe_bool","backup","callback","cinemagraph_analysis","colors","display_name","discard_original_filename","eager","build_eager","eager_async","eager_notification_url","eval","exif","faces","folder","filename_override","image_metadata","media_metadata","invalidate","moderation","overwrite","phash","proxy","public_id_prefix","quality_analysis","responsive_breakpoints","generate_responsive_breakpoints_string","return_delete_token","unique_filename","upload_preset","use_filename","use_filename_as_display_name","quality_override","accessibility_analysis","use_asset_folder_as_public_id_prefix","updateable_resource_params","encode_key_value","arg","_ref","_ref2","k","escapeMetadataValue","toString","encode_context","metadataObj","_ref3","_ref4","values","innerVal","transformations","transformationString","build_custom_headers","headers","_ref5","_ref6","t","present","responsive_width","width","height","size","_size$split","_size$split2","_ref7","has_layer","overlay","underlay","crop","angle","no_html_sizes","indexOf","parseFloat","background","color","base_transformations","named_transformation","some","tr","effect","_ref8","_ref9","border","flags","dpr","offset","_split_range","split_range","_split_range2","start_offset","end_offset","custom_function","custom_pre_function","fps","a","ar","b","bo","c","co","e","fl","fn","h","ki","l","o","q","r","u","w","y","z","_ref10","_ref11","name","short","vc","process_video_params","norm_range_value","variablesParam","variables","_ref12","_ref13","startsWith","_ref14","_ref15","sort","concat","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","raw_transformation","responsive_width_transformation","String","responsive","hidpi","access_control","jsonArrayParam","auto_tagging","background_removal","categorization","context","metadata","custom_coordinates","detection","face_coordinates","ocr","raw_convert","similarity_search","tags","unique_display_name","URL_KEYS","extractUrlParams","pickOnlyExistingValues","apply","extractTransformationParams","patchFetchFormat","signature","source_to_sign","force_version","long_url_signature","cloud_name","private_cdn","secure_distribution","secure","ssl_detected","cdn_subdomain","secure_cdn_subdomain","cname","shorten","sign_url","api_secret","url_suffix","use_root_path","signature_algorithm","merge","preloaded","original_source","_finalize_resource_ty","finalize_resource_type","_finalize_resource_ty2","_finalize_source","finalize_source","_finalize_source2","to_sign","part","hash","computeHash","substring","prefix","unsigned_url_prefix","resultUrl","path","token","urlAnalytics","_getSDKVersions","sdkCode","sdkSemver","techVersion","sdkVersions","analyticsOptions","sdkAnalyticsSignature","appender","video_url","video_thumbnail_url","shared_domain","subdomain","cdn_part","subdomain_part","host","base_api_url","cloudinary","encode_path","unencoded_path","encoded_path","api_url","action","random_public_id","randomBytes","signed_preloaded_image","api_sign_request","params_to_sign","_ref22","_ref23","_ref24","_ref25","input","encoding","createHash","update","digest","clear_blank","filtered_hash","_ref26","_ref27","_ref28","_ref29","hash1","hash2","sign_request","apiKey","apiSecret","api_key","webhook_signature","data","verifyNotificationSignature","body","valid_for","Math","round","Date","now","payload_hash","process_request_params","unsigned","oauth_token","private_download_url","attachment","expires_at","stringify","zip_download_url","hashToQuery","download_backedup_asset","asset_id","version_id","api_download_url","download_params","mode","cloudinary_params","download_archive_url","archive_params","download_zip_url","target_format","download_folder","folder_path","prefixes","join_pair","escapeQuotes","html_attrs","attrs","CLOUDINARY_JS_CONFIG_PARAMS","cloudinary_js_config","JSON","v1_result_adapter","v1_adapter","num_pass_args","v1","_len","args","_key","pass_args","v1_adapters","mapping","NUMBER_PATTERN","OFFSET_ANY_PATTERN","RANGE_VALUE_RE","OFFSET_ANY_PATTERN_RE","range","constructor","modifier","param","video","codec","profile","level","allow_missing","flatten_folders","flatten_transformations","keep_derived","fully_qualified_public_ids","public_ids","skip_transformation_name","target_public_id","target_tags","use_original_filename","create_source_tag","src","source_type","codecs","video_type","mime_type","codecs_str","build_explicit_api_params","breakpoints","j","breakpoint_settings","build_streaming_profiles_param","representations","hashToParameters","reduce","parameters","_ref30","_ref31","endsWith","items","_ref32","_ref33","escape","_len2","_key2","optionalRequire","moduleName","code","NOP","floor","getTime","option_consume","build_array","encode_double_array","only"],"sources":["D:/MernStack-Tour-Management-main/tour-management/frontend/node_modules/cloudinary/lib-es5/utils/index.js"],"sourcesContent":["\"use strict\";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * Utilities\n * @module utils\n * @borrows module:auth_token as generate_auth_token\n */\n\nvar crypto = require(\"crypto\");\nvar querystring = require(\"querystring\");\nvar urlParse = require(\"url\").parse;\n\n// Functions used internally\nvar compact = require(\"lodash/compact\");\nvar first = require(\"lodash/first\");\nvar isFunction = require(\"lodash/isFunction\");\nvar isPlainObject = require(\"lodash/isPlainObject\");\nvar last = require(\"lodash/last\");\nvar map = require(\"lodash/map\");\nvar take = require(\"lodash/take\");\nvar at = require(\"lodash/at\");\n\n// Exposed by the module\nvar clone = require(\"lodash/clone\");\nvar extend = require(\"lodash/extend\");\nvar filter = require(\"lodash/filter\");\nvar includes = require(\"lodash/includes\");\nvar isArray = require(\"lodash/isArray\");\nvar isEmpty = require(\"lodash/isEmpty\");\nvar isNumber = require(\"lodash/isNumber\");\nvar isObject = require(\"lodash/isObject\");\nvar isString = require(\"lodash/isString\");\nvar isUndefined = require(\"lodash/isUndefined\");\n\nvar smart_escape = require(\"./encoding/smart_escape\");\nvar consumeOption = require('./parsing/consumeOption');\nvar toArray = require('./parsing/toArray');\n\nvar _require = require('./encoding/base64EncodeURL'),\n    base64EncodeURL = _require.base64EncodeURL;\n\nvar encodeDoubleArray = require('./encoding/encodeDoubleArray');\n\nvar config = require(\"../config\");\nvar generate_token = require(\"../auth_token\");\nvar utf8_encode = require('./utf8_encode');\nvar crc32 = require('./crc32');\nvar ensurePresenceOf = require('./ensurePresenceOf');\nvar ensureOption = require('./ensureOption').defaults(config());\nvar entries = require('./entries');\nvar isRemoteUrl = require('./isRemoteUrl');\nvar getSDKVersions = require('./encoding/sdkAnalytics/getSDKVersions');\n\nvar _require$Util = require('cloudinary-core').Util,\n    getAnalyticsOptions = _require$Util.getAnalyticsOptions,\n    getSDKAnalyticsSignature = _require$Util.getSDKAnalyticsSignature;\n\nexports = module.exports;\nvar utils = module.exports;\n\ntry {\n  // eslint-disable-next-line global-require\n  utils.VERSION = require('../../package.json').version;\n} catch (error) {\n  utils.VERSION = '';\n}\n\nfunction generate_auth_token(options) {\n  var token_options = Object.assign({}, config().auth_token, options);\n  return generate_token(token_options);\n}\n\nexports.CF_SHARED_CDN = \"d3jpl91pxevbkh.cloudfront.net\";\nexports.OLD_AKAMAI_SHARED_CDN = \"cloudinary-a.akamaihd.net\";\nexports.AKAMAI_SHARED_CDN = \"res.cloudinary.com\";\nexports.SHARED_CDN = exports.AKAMAI_SHARED_CDN;\nexports.USER_AGENT = `CloudinaryNodeJS/${exports.VERSION} (Node ${process.versions.node})`;\n\n// Add platform information to the USER_AGENT header\n// This is intended for platform information and not individual applications!\nexports.userPlatform = \"\";\n\nfunction getUserAgent() {\n  return isEmpty(utils.userPlatform) ? `${utils.USER_AGENT}` : `${utils.userPlatform} ${utils.USER_AGENT}`;\n}\n\nvar _require2 = require('./consts'),\n    DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION = _require2.DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION,\n    DEFAULT_POSTER_OPTIONS = _require2.DEFAULT_POSTER_OPTIONS,\n    DEFAULT_VIDEO_SOURCE_TYPES = _require2.DEFAULT_VIDEO_SOURCE_TYPES,\n    CONDITIONAL_OPERATORS = _require2.CONDITIONAL_OPERATORS,\n    PREDEFINED_VARS = _require2.PREDEFINED_VARS,\n    LAYER_KEYWORD_PARAMS = _require2.LAYER_KEYWORD_PARAMS,\n    TRANSFORMATION_PARAMS = _require2.TRANSFORMATION_PARAMS,\n    SIMPLE_PARAMS = _require2.SIMPLE_PARAMS,\n    UPLOAD_PREFIX = _require2.UPLOAD_PREFIX,\n    SUPPORTED_SIGNATURE_ALGORITHMS = _require2.SUPPORTED_SIGNATURE_ALGORITHMS,\n    DEFAULT_SIGNATURE_ALGORITHM = _require2.DEFAULT_SIGNATURE_ALGORITHM;\n\nfunction textStyle(layer) {\n  var keywords = [];\n  var style = \"\";\n\n  if (!isEmpty(layer.text_style)) {\n    return layer.text_style;\n  }\n  Object.keys(LAYER_KEYWORD_PARAMS).forEach(function (attr) {\n    var default_value = LAYER_KEYWORD_PARAMS[attr];\n    var attr_value = layer[attr] || default_value;\n    if (attr_value !== default_value) {\n      keywords.push(attr_value);\n    }\n  });\n\n  Object.keys(layer).forEach(function (attr) {\n    if (attr === \"letter_spacing\" || attr === \"line_spacing\") {\n      keywords.push(`${attr}_${layer[attr]}`);\n    }\n    if (attr === \"font_hinting\") {\n      keywords.push(`${attr.split(\"_\").pop()}_${layer[attr]}`);\n    }\n    if (attr === \"font_antialiasing\") {\n      keywords.push(`antialias_${layer[attr]}`);\n    }\n  });\n\n  if (layer.hasOwnProperty(\"font_size\" || \"font_family\") || !isEmpty(keywords)) {\n    if (!layer.font_size) throw `Must supply font_size for text in overlay/underlay`;\n    if (!layer.font_family) throw `Must supply font_family for text in overlay/underlay`;\n    keywords.unshift(layer.font_size);\n    keywords.unshift(layer.font_family);\n    style = compact(keywords).join(\"_\");\n  }\n  return style;\n}\n\n/**\n * Normalize an expression string, replace \"nice names\" with their coded values and spaces with \"_\"\n * e.g. `width > 0` => `w_lt_0`\n *\n * @param {String} expression An expression to be normalized\n * @return {Object|String} A normalized String of the input value if possible otherwise the value itself\n */\nfunction normalize_expression(expression) {\n  if (!isString(expression) || expression.length === 0 || expression.match(/^!.+!$/)) {\n    return expression;\n  }\n\n  var operators = \"\\\\|\\\\||>=|<=|&&|!=|>|=|<|/|-|\\\\^|\\\\+|\\\\*\";\n  var operatorsPattern = \"((\" + operators + \")(?=[ _]))\";\n  var operatorsReplaceRE = new RegExp(operatorsPattern, \"g\");\n  expression = expression.replace(operatorsReplaceRE, function (match) {\n    return CONDITIONAL_OPERATORS[match];\n  });\n\n  // Duplicate PREDEFINED_VARS to also include :{var_name} as well as {var_name}\n  // Example:\n  // -- PREDEFINED_VARS = ['foo']\n  // -- predefinedVarsPattern = ':foo|foo'\n  // It is done like this because node 6 does not support regex lookbehind\n  var predefinedVarsPattern = \"(\" + Object.keys(PREDEFINED_VARS).map(function (v) {\n    return `:${v}|${v}`;\n  }).join(\"|\") + \")\";\n  var userVariablePattern = '(\\\\$_*[^_ ]+)';\n  var variablesReplaceRE = new RegExp(`${userVariablePattern}|${predefinedVarsPattern}`, \"g\");\n  expression = expression.replace(variablesReplaceRE, function (match) {\n    return PREDEFINED_VARS[match] || match;\n  });\n\n  return expression.replace(/[ _]+/g, '_');\n}\n\n/**\n * Parse custom_function options\n * @private\n * @param {object|*} customFunction a custom function object containing function_type and source values\n * @return {string|*} custom_function transformation string\n */\nfunction process_custom_function(customFunction) {\n  if (!isObject(customFunction)) {\n    return customFunction;\n  }\n  if (customFunction.function_type === \"remote\") {\n    var encodedSource = base64EncodeURL(customFunction.source);\n\n    return [customFunction.function_type, encodedSource].join(\":\");\n  }\n  return [customFunction.function_type, customFunction.source].join(\":\");\n}\n\n/**\n * Parse custom_pre_function options\n * @private\n * @param {object|*} customPreFunction a custom function object containing function_type and source values\n * @return {string|*} custom_pre_function transformation string\n */\nfunction process_custom_pre_function(customPreFunction) {\n  var result = process_custom_function(customPreFunction);\n  return utils.isString(result) ? `pre:${result}` : null;\n}\n\n/**\n * Parse \"if\" parameter\n * Translates the condition if provided.\n * @private\n * @return {string} \"if_\" + ifValue\n */\nfunction process_if(ifValue) {\n  return ifValue ? \"if_\" + normalize_expression(ifValue) : ifValue;\n}\n\n/**\n * Parse layer options\n * @private\n * @param {object|*} layer The layer to parse.\n * @return {string} layer transformation string\n */\nfunction process_layer(layer) {\n  var result = '';\n  if (isPlainObject(layer)) {\n    if (layer.resource_type === \"fetch\" || layer.url != null) {\n      result = `fetch:${base64EncodeURL(layer.url)}`;\n    } else {\n      var public_id = layer.public_id;\n      var format = layer.format;\n      var resource_type = layer.resource_type || \"image\";\n      var type = layer.type || \"upload\";\n      var text = layer.text;\n      var style = null;\n      var components = [];\n      var noPublicId = isEmpty(public_id);\n      if (!noPublicId) {\n        public_id = public_id.replace(new RegExp(\"/\", 'g'), \":\");\n        if (format != null) {\n          public_id = `${public_id}.${format}`;\n        }\n      }\n      if (isEmpty(text) && resource_type !== \"text\") {\n        if (noPublicId) {\n          throw \"Must supply public_id for resource_type layer_parameter\";\n        }\n        if (resource_type === \"subtitles\") {\n          style = textStyle(layer);\n        }\n      } else {\n        resource_type = \"text\";\n        type = null;\n        // type is ignored for text layers\n        style = textStyle(layer);\n        if (!isEmpty(text)) {\n          var noStyle = isEmpty(style);\n          if (!(noPublicId || noStyle) || noPublicId && noStyle) {\n            throw \"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay\";\n          }\n          var re = /\\$\\([a-zA-Z]\\w*\\)/g;\n          var start = 0;\n          var textSource = smart_escape(decodeURIComponent(text), /[,\\/]/g);\n          text = \"\";\n          for (var res = re.exec(textSource); res; res = re.exec(textSource)) {\n            text += smart_escape(textSource.slice(start, res.index));\n            text += res[0];\n            start = res.index + res[0].length;\n          }\n          text += encodeURIComponent(textSource.slice(start));\n        }\n      }\n      if (resource_type !== \"image\") {\n        components.push(resource_type);\n      }\n      if (type !== \"upload\") {\n        components.push(type);\n      }\n      components.push(style);\n      components.push(public_id);\n      components.push(text);\n      result = compact(components).join(\":\");\n    }\n  } else if (/^fetch:.+/.test(layer)) {\n    result = `fetch:${base64EncodeURL(layer.substr(6))}`;\n  } else {\n    result = layer;\n  }\n  return result;\n}\n\n/**\n * Parse radius options\n * @private\n * @param {Array<string|number>|string|number} radius The radius to parse\n * @return {string} radius transformation string\n */\nfunction process_radius(radius) {\n  if (!radius) {\n    return radius;\n  }\n  if (!isArray(radius)) {\n    radius = [radius];\n  }\n  if (radius.length === 0 || radius.length > 4) {\n    throw new Error(\"Radius array should contain between 1 and 4 values\");\n  }\n  if (radius.findIndex(function (x) {\n    return x === null;\n  }) >= 0) {\n    throw new Error(\"Corner: Cannot be null\");\n  }\n  return radius.map(normalize_expression).join(':');\n}\n\nfunction build_multi_and_sprite_params(tagOrOptions, options) {\n  var tag = null;\n  if (typeof tagOrOptions === 'string') {\n    tag = tagOrOptions;\n  } else {\n    if (isEmpty(options)) {\n      options = tagOrOptions;\n    } else {\n      throw new Error('First argument must be a tag when additional options are passed');\n    }\n    tag = null;\n  }\n  if (!options && !tag) {\n    throw new Error('Either tag or urls are required');\n  }\n  if (!options) {\n    options = {};\n  }\n  var urls = options.urls;\n  var transformation = generate_transformation_string(extend({}, options, {\n    fetch_format: options.format\n  }));\n  return {\n    tag,\n    transformation,\n    urls,\n    timestamp: utils.timestamp(),\n    async: options.async,\n    notification_url: options.notification_url\n  };\n}\n\nfunction build_upload_params(options) {\n  var params = {\n    access_mode: options.access_mode,\n    allowed_formats: options.allowed_formats && toArray(options.allowed_formats).join(\",\"),\n    asset_folder: options.asset_folder,\n    async: utils.as_safe_bool(options.async),\n    backup: utils.as_safe_bool(options.backup),\n    callback: options.callback,\n    cinemagraph_analysis: utils.as_safe_bool(options.cinemagraph_analysis),\n    colors: utils.as_safe_bool(options.colors),\n    display_name: options.display_name,\n    discard_original_filename: utils.as_safe_bool(options.discard_original_filename),\n    eager: utils.build_eager(options.eager),\n    eager_async: utils.as_safe_bool(options.eager_async),\n    eager_notification_url: options.eager_notification_url,\n    eval: options.eval,\n    exif: utils.as_safe_bool(options.exif),\n    faces: utils.as_safe_bool(options.faces),\n    folder: options.folder,\n    format: options.format,\n    filename_override: options.filename_override,\n    image_metadata: utils.as_safe_bool(options.image_metadata),\n    media_metadata: utils.as_safe_bool(options.media_metadata),\n    invalidate: utils.as_safe_bool(options.invalidate),\n    moderation: options.moderation,\n    notification_url: options.notification_url,\n    overwrite: utils.as_safe_bool(options.overwrite),\n    phash: utils.as_safe_bool(options.phash),\n    proxy: options.proxy,\n    public_id: options.public_id,\n    public_id_prefix: options.public_id_prefix,\n    quality_analysis: utils.as_safe_bool(options.quality_analysis),\n    responsive_breakpoints: utils.generate_responsive_breakpoints_string(options.responsive_breakpoints),\n    return_delete_token: utils.as_safe_bool(options.return_delete_token),\n    timestamp: options.timestamp || exports.timestamp(),\n    transformation: utils.generate_transformation_string(clone(options)),\n    type: options.type,\n    unique_filename: utils.as_safe_bool(options.unique_filename),\n    upload_preset: options.upload_preset,\n    use_filename: utils.as_safe_bool(options.use_filename),\n    use_filename_as_display_name: utils.as_safe_bool(options.use_filename_as_display_name),\n    quality_override: options.quality_override,\n    accessibility_analysis: utils.as_safe_bool(options.accessibility_analysis),\n    use_asset_folder_as_public_id_prefix: utils.as_safe_bool(options.use_asset_folder_as_public_id_prefix)\n  };\n  return utils.updateable_resource_params(options, params);\n}\n\nfunction encode_key_value(arg) {\n  if (!isObject(arg)) {\n    return arg;\n  }\n  return entries(arg).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        k = _ref2[0],\n        v = _ref2[1];\n\n    return `${k}=${v}`;\n  }).join('|');\n}\n\n/**\n * @description Escape = and | with two backslashes \\\\\n * @param {string|number} value\n * @return {string}\n */\nfunction escapeMetadataValue(value) {\n  return value.toString().replace(/([=|])/g, '\\\\$&');\n}\n\n/**\n *\n * @description Encode metadata fields based on incoming value.\n *              If array, escape as color_id=[\\\"green\\\",\\\"red\\\"]\n *              If string/number, escape as in_stock_id=50\n *\n *              Joins resulting values with a pipe:\n *              in_stock_id=50|color_id=[\\\"green\\\",\\\"red\\\"]\n *\n *              = and | and escaped by default (this can't be turned off)\n *\n * @param metadataObj\n * @return {string}\n */\nfunction encode_context(metadataObj) {\n  if (!isObject(metadataObj)) {\n    return metadataObj;\n  }\n\n  return entries(metadataObj).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    // if string, simply parse the value and move on\n    if (isString(value)) {\n      return `${key}=${escapeMetadataValue(value)}`;\n\n      // If array, parse each item individually\n    } else if (isArray(value)) {\n      var values = value.map(function (innerVal) {\n        return `\\\"${escapeMetadataValue(innerVal)}\\\"`;\n      }).join(',');\n      return `${key}=[${values}]`;\n      // if unknown, return the value as string\n    } else {\n      return value.toString();\n    }\n  }).join('|');\n}\n\nfunction build_eager(transformations) {\n  return toArray(transformations).map(function (transformation) {\n    var transformationString = utils.generate_transformation_string(clone(transformation));\n    var format = transformation.format;\n    return format == null ? transformationString : `${transformationString}/${format}`;\n  }).join('|');\n}\n/**\n * Build the custom headers for the request\n * @private\n * @param headers\n * @return {Array<string>|object|string} An object of name and value,\n *         an array of header strings, or a string of headers\n */\nfunction build_custom_headers(headers) {\n  switch (true) {\n    case headers == null:\n      return void 0;\n    case isArray(headers):\n      return headers.join(\"\\n\");\n    case isObject(headers):\n      return entries(headers).map(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            k = _ref6[0],\n            v = _ref6[1];\n\n        return `${k}:${v}`;\n      }).join(\"\\n\");\n    default:\n      return headers;\n  }\n}\n\nfunction generate_transformation_string(options) {\n  if (utils.isString(options)) {\n    return options;\n  }\n  if (isArray(options)) {\n    return options.map(function (t) {\n      return utils.generate_transformation_string(clone(t));\n    }).filter(utils.present).join('/');\n  }\n\n  var responsive_width = consumeOption(options, \"responsive_width\", config().responsive_width);\n  var width = options.width;\n  var height = options.height;\n  var size = consumeOption(options, \"size\");\n  if (size) {\n    var _size$split = size.split(\"x\");\n\n    var _size$split2 = _slicedToArray(_size$split, 2);\n\n    width = _size$split2[0];\n    height = _size$split2[1];\n    var _ref7 = [width, height];\n    options.width = _ref7[0];\n    options.height = _ref7[1];\n  }\n  var has_layer = options.overlay || options.underlay;\n  var crop = consumeOption(options, \"crop\");\n  var angle = toArray(consumeOption(options, \"angle\")).join(\".\");\n  var no_html_sizes = has_layer || utils.present(angle) || crop === \"fit\" || crop === \"limit\" || responsive_width;\n  if (width && (width.toString().indexOf(\"auto\") === 0 || no_html_sizes || parseFloat(width) < 1)) {\n    delete options.width;\n  }\n  if (height && (no_html_sizes || parseFloat(height) < 1)) {\n    delete options.height;\n  }\n  var background = consumeOption(options, \"background\");\n  background = background && background.replace(/^#/, \"rgb:\");\n  var color = consumeOption(options, \"color\");\n  color = color && color.replace(/^#/, \"rgb:\");\n  var base_transformations = toArray(consumeOption(options, \"transformation\", []));\n  var named_transformation = [];\n  if (base_transformations.some(isObject)) {\n    base_transformations = base_transformations.map(function (tr) {\n      return utils.generate_transformation_string(isObject(tr) ? clone(tr) : { transformation: tr });\n    });\n  } else {\n    named_transformation = base_transformations.join(\".\");\n    base_transformations = [];\n  }\n  var effect = consumeOption(options, \"effect\");\n  if (isArray(effect)) {\n    effect = effect.join(\":\");\n  } else if (isObject(effect)) {\n    effect = entries(effect).map(function (_ref8) {\n      var _ref9 = _slicedToArray(_ref8, 2),\n          key = _ref9[0],\n          value = _ref9[1];\n\n      return `${key}:${value}`;\n    });\n  }\n  var border = consumeOption(options, \"border\");\n  if (isObject(border)) {\n    border = `${border.width != null ? border.width : 2}px_solid_${(border.color != null ? border.color : \"black\").replace(/^#/, 'rgb:')}`;\n  } else if (/^\\d+$/.exec(border)) {\n    // fallback to html border attributes\n    options.border = border;\n    border = void 0;\n  }\n  var flags = toArray(consumeOption(options, \"flags\")).join(\".\");\n  var dpr = consumeOption(options, \"dpr\", config().dpr);\n  if (options.offset != null) {\n    var _split_range = split_range(consumeOption(options, \"offset\"));\n\n    var _split_range2 = _slicedToArray(_split_range, 2);\n\n    options.start_offset = _split_range2[0];\n    options.end_offset = _split_range2[1];\n  }\n  if (options.start_offset) {\n    options.start_offset = normalize_expression(options.start_offset);\n  }\n  if (options.end_offset) {\n    options.end_offset = normalize_expression(options.end_offset);\n  }\n  var overlay = process_layer(consumeOption(options, \"overlay\"));\n  var radius = process_radius(consumeOption(options, \"radius\"));\n  var underlay = process_layer(consumeOption(options, \"underlay\"));\n  var ifValue = process_if(consumeOption(options, \"if\"));\n  var custom_function = process_custom_function(consumeOption(options, \"custom_function\"));\n  var custom_pre_function = process_custom_pre_function(consumeOption(options, \"custom_pre_function\"));\n  var fps = consumeOption(options, 'fps');\n  if (isArray(fps)) {\n    fps = fps.join('-');\n  }\n  var params = {\n    a: normalize_expression(angle),\n    ar: normalize_expression(consumeOption(options, \"aspect_ratio\")),\n    b: background,\n    bo: border,\n    c: crop,\n    co: color,\n    dpr: normalize_expression(dpr),\n    e: normalize_expression(effect),\n    fl: flags,\n    fn: custom_function || custom_pre_function,\n    fps: fps,\n    h: normalize_expression(height),\n    ki: normalize_expression(consumeOption(options, \"keyframe_interval\")),\n    l: overlay,\n    o: normalize_expression(consumeOption(options, \"opacity\")),\n    q: normalize_expression(consumeOption(options, \"quality\")),\n    r: radius,\n    t: named_transformation,\n    u: underlay,\n    w: normalize_expression(width),\n    x: normalize_expression(consumeOption(options, \"x\")),\n    y: normalize_expression(consumeOption(options, \"y\")),\n    z: normalize_expression(consumeOption(options, \"zoom\"))\n  };\n\n  SIMPLE_PARAMS.forEach(function (_ref10) {\n    var _ref11 = _slicedToArray(_ref10, 2),\n        name = _ref11[0],\n        short = _ref11[1];\n\n    var value = consumeOption(options, name);\n    if (value !== undefined) {\n      params[short] = value;\n    }\n  });\n  if (params.vc != null) {\n    params.vc = process_video_params(params.vc);\n  }\n  [\"so\", \"eo\", \"du\"].forEach(function (short) {\n    if (params[short] !== undefined) {\n      params[short] = norm_range_value(params[short]);\n    }\n  });\n\n  var variablesParam = consumeOption(options, \"variables\", []);\n  var variables = entries(options).filter(function (_ref12) {\n    var _ref13 = _slicedToArray(_ref12, 2),\n        key = _ref13[0],\n        value = _ref13[1];\n\n    return key.startsWith('$');\n  }).map(function (_ref14) {\n    var _ref15 = _slicedToArray(_ref14, 2),\n        key = _ref15[0],\n        value = _ref15[1];\n\n    delete options[key];\n    return `${key}_${normalize_expression(value)}`;\n  }).sort().concat(variablesParam.map(function (_ref16) {\n    var _ref17 = _slicedToArray(_ref16, 2),\n        name = _ref17[0],\n        value = _ref17[1];\n\n    return `${name}_${normalize_expression(value)}`;\n  })).join(',');\n\n  var transformations = entries(params).filter(function (_ref18) {\n    var _ref19 = _slicedToArray(_ref18, 2),\n        key = _ref19[0],\n        value = _ref19[1];\n\n    return utils.present(value);\n  }).map(function (_ref20) {\n    var _ref21 = _slicedToArray(_ref20, 2),\n        key = _ref21[0],\n        value = _ref21[1];\n\n    return key + '_' + value;\n  }).sort().join(',');\n\n  var raw_transformation = consumeOption(options, 'raw_transformation');\n  transformations = compact([ifValue, variables, transformations, raw_transformation]).join(\",\");\n  base_transformations.push(transformations);\n  transformations = base_transformations;\n  if (responsive_width) {\n    var responsive_width_transformation = config().responsive_width_transformation || DEFAULT_RESPONSIVE_WIDTH_TRANSFORMATION;\n\n    transformations.push(utils.generate_transformation_string(clone(responsive_width_transformation)));\n  }\n  if (String(width).startsWith(\"auto\") || responsive_width) {\n    options.responsive = true;\n  }\n  if (dpr === \"auto\") {\n    options.hidpi = true;\n  }\n  return filter(transformations, utils.present).join(\"/\");\n}\n\nfunction updateable_resource_params(options) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (options.access_control != null) {\n    params.access_control = utils.jsonArrayParam(options.access_control);\n  }\n  if (options.auto_tagging != null) {\n    params.auto_tagging = options.auto_tagging;\n  }\n  if (options.background_removal != null) {\n    params.background_removal = options.background_removal;\n  }\n  if (options.categorization != null) {\n    params.categorization = options.categorization;\n  }\n  if (options.context != null) {\n    params.context = utils.encode_context(options.context);\n  }\n  if (options.metadata != null) {\n    params.metadata = utils.encode_context(options.metadata);\n  }\n  if (options.custom_coordinates != null) {\n    params.custom_coordinates = encodeDoubleArray(options.custom_coordinates);\n  }\n  if (options.detection != null) {\n    params.detection = options.detection;\n  }\n  if (options.face_coordinates != null) {\n    params.face_coordinates = encodeDoubleArray(options.face_coordinates);\n  }\n  if (options.headers != null) {\n    params.headers = utils.build_custom_headers(options.headers);\n  }\n  if (options.notification_url != null) {\n    params.notification_url = options.notification_url;\n  }\n  if (options.ocr != null) {\n    params.ocr = options.ocr;\n  }\n  if (options.raw_convert != null) {\n    params.raw_convert = options.raw_convert;\n  }\n  if (options.similarity_search != null) {\n    params.similarity_search = options.similarity_search;\n  }\n  if (options.tags != null) {\n    params.tags = toArray(options.tags).join(\",\");\n  }\n  if (options.quality_override != null) {\n    params.quality_override = options.quality_override;\n  }\n  if (options.asset_folder != null) {\n    params.asset_folder = options.asset_folder;\n  }\n  if (options.display_name != null) {\n    params.display_name = options.display_name;\n  }\n  if (options.unique_display_name != null) {\n    params.unique_display_name = options.unique_display_name;\n  }\n  return params;\n}\n\n/**\n * A list of keys used by the url() function.\n * @private\n */\nvar URL_KEYS = ['api_secret', 'auth_token', 'cdn_subdomain', 'cloud_name', 'cname', 'format', 'long_url_signature', 'private_cdn', 'resource_type', 'secure', 'secure_cdn_subdomain', 'secure_distribution', 'shorten', 'sign_url', 'ssl_detected', 'type', 'url_suffix', 'use_root_path', 'version'];\n\n/**\n * Create a new object with only URL parameters\n * @param {object} options The source object\n * @return {Object} An object containing only URL parameters\n */\n\nfunction extractUrlParams(options) {\n  return pickOnlyExistingValues.apply(undefined, [options].concat(URL_KEYS));\n}\n\n/**\n * Create a new object with only transformation parameters\n * @param {object} options The source object\n * @return {Object} An object containing only transformation parameters\n */\n\nfunction extractTransformationParams(options) {\n  return pickOnlyExistingValues.apply(undefined, [options].concat(_toConsumableArray(TRANSFORMATION_PARAMS)));\n}\n\n/**\n * Handle the format parameter for fetch urls\n * @private\n * @param options url and transformation options. This argument may be changed by the function!\n */\n\nfunction patchFetchFormat() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (options.type === \"fetch\") {\n    if (options.fetch_format == null) {\n      options.fetch_format = consumeOption(options, \"format\");\n    }\n  }\n}\n\nfunction url(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var signature = void 0,\n      source_to_sign = void 0;\n  utils.patchFetchFormat(options);\n  var type = consumeOption(options, \"type\", null);\n  var transformation = utils.generate_transformation_string(options);\n\n  var resource_type = consumeOption(options, \"resource_type\", \"image\");\n  var version = consumeOption(options, \"version\");\n  var force_version = consumeOption(options, \"force_version\", config().force_version);\n  if (force_version == null) {\n    force_version = true;\n  }\n  var long_url_signature = !!consumeOption(options, \"long_url_signature\", config().long_url_signature);\n  var format = consumeOption(options, \"format\");\n  var cloud_name = consumeOption(options, \"cloud_name\", config().cloud_name);\n  if (!cloud_name) {\n    throw \"Unknown cloud_name\";\n  }\n  var private_cdn = consumeOption(options, \"private_cdn\", config().private_cdn);\n  var secure_distribution = consumeOption(options, \"secure_distribution\", config().secure_distribution);\n  var secure = consumeOption(options, \"secure\", null);\n  var ssl_detected = consumeOption(options, \"ssl_detected\", config().ssl_detected);\n  if (secure === null) {\n    secure = ssl_detected || config().secure;\n  }\n  var cdn_subdomain = consumeOption(options, \"cdn_subdomain\", config().cdn_subdomain);\n  var secure_cdn_subdomain = consumeOption(options, \"secure_cdn_subdomain\", config().secure_cdn_subdomain);\n  var cname = consumeOption(options, \"cname\", config().cname);\n  var shorten = consumeOption(options, \"shorten\", config().shorten);\n  var sign_url = consumeOption(options, \"sign_url\", config().sign_url);\n  var api_secret = consumeOption(options, \"api_secret\", config().api_secret);\n  var url_suffix = consumeOption(options, \"url_suffix\");\n  var use_root_path = consumeOption(options, \"use_root_path\", config().use_root_path);\n  var signature_algorithm = consumeOption(options, \"signature_algorithm\", config().signature_algorithm || DEFAULT_SIGNATURE_ALGORITHM);\n  if (long_url_signature) {\n    signature_algorithm = 'sha256';\n  }\n  var auth_token = consumeOption(options, \"auth_token\");\n  if (auth_token !== false) {\n    auth_token = exports.merge(config().auth_token, auth_token);\n  }\n  var preloaded = /^(image|raw)\\/([a-z0-9_]+)\\/v(\\d+)\\/([^#]+)$/.exec(public_id);\n  if (preloaded) {\n    resource_type = preloaded[1];\n    type = preloaded[2];\n    version = preloaded[3];\n    public_id = preloaded[4];\n  }\n  var original_source = public_id;\n  if (public_id == null) {\n    return original_source;\n  }\n  public_id = public_id.toString();\n  if (type === null && public_id.match(/^https?:\\//i)) {\n    return original_source;\n  }\n\n  var _finalize_resource_ty = finalize_resource_type(resource_type, type, url_suffix, use_root_path, shorten);\n\n  var _finalize_resource_ty2 = _slicedToArray(_finalize_resource_ty, 2);\n\n  resource_type = _finalize_resource_ty2[0];\n  type = _finalize_resource_ty2[1];\n\n  var _finalize_source = finalize_source(public_id, format, url_suffix);\n\n  var _finalize_source2 = _slicedToArray(_finalize_source, 2);\n\n  public_id = _finalize_source2[0];\n  source_to_sign = _finalize_source2[1];\n\n\n  if (version == null && force_version && source_to_sign.indexOf(\"/\") >= 0 && !source_to_sign.match(/^v[0-9]+/) && !source_to_sign.match(/^https?:\\//)) {\n    version = 1;\n  }\n  if (version != null) {\n    version = `v${version}`;\n  } else {\n    version = null;\n  }\n\n  transformation = transformation.replace(/([^:])\\/\\//g, '$1/');\n  if (sign_url && isEmpty(auth_token)) {\n    var to_sign = [transformation, source_to_sign].filter(function (part) {\n      return part != null && part !== '';\n    }).join('/');\n    try {\n      for (var i = 0; to_sign !== decodeURIComponent(to_sign) && i < 10; i++) {\n        to_sign = decodeURIComponent(to_sign);\n      }\n      // eslint-disable-next-line no-empty\n    } catch (error) {}\n    var hash = computeHash(to_sign + api_secret, signature_algorithm, 'base64');\n    signature = hash.replace(/\\//g, '_').replace(/\\+/g, '-').substring(0, long_url_signature ? 32 : 8);\n    signature = `s--${signature}--`;\n  }\n  var prefix = unsigned_url_prefix(public_id, cloud_name, private_cdn, cdn_subdomain, secure_cdn_subdomain, cname, secure, secure_distribution);\n  var resultUrl = [prefix, resource_type, type, signature, transformation, version, public_id].filter(function (part) {\n    return part != null && part !== '';\n  }).join('/').replace(/ /g, '%20');\n  if (sign_url && !isEmpty(auth_token)) {\n    auth_token.url = urlParse(resultUrl).path;\n    var token = generate_token(auth_token);\n    resultUrl += `?${token}`;\n  }\n\n  var urlAnalytics = ensureOption(options, 'urlAnalytics', false);\n\n  if (urlAnalytics === true) {\n    var _getSDKVersions = getSDKVersions(),\n        sdkCode = _getSDKVersions.sdkCode,\n        sdkSemver = _getSDKVersions.sdkSemver,\n        techVersion = _getSDKVersions.techVersion;\n\n    var sdkVersions = {\n      sdkCode: ensureOption(options, 'sdkCode', sdkCode),\n      sdkSemver: ensureOption(options, 'sdkSemver', sdkSemver),\n      techVersion: ensureOption(options, 'techVersion', techVersion)\n    };\n\n    var analyticsOptions = getAnalyticsOptions(Object.assign({}, options, sdkVersions));\n\n    var sdkAnalyticsSignature = getSDKAnalyticsSignature(analyticsOptions);\n\n    // url might already have a '?' query param\n    var appender = '?';\n    if (resultUrl.indexOf('?') >= 0) {\n      appender = '&';\n    }\n    resultUrl = `${resultUrl}${appender}_a=${sdkAnalyticsSignature}`;\n  }\n\n  return resultUrl;\n}\n\nfunction video_url(public_id, options) {\n  options = extend({\n    resource_type: 'video'\n  }, options);\n  return utils.url(public_id, options);\n}\n\nfunction finalize_source(source, format, url_suffix) {\n  var source_to_sign = void 0;\n  source = source.replace(/([^:])\\/\\//g, '$1/');\n  if (source.match(/^https?:\\//i)) {\n    source = smart_escape(source);\n    source_to_sign = source;\n  } else {\n    source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n    source_to_sign = source;\n    if (url_suffix) {\n      if (url_suffix.match(/[\\.\\/]/)) {\n        throw new Error('url_suffix should not include . or /');\n      }\n      source = source + '/' + url_suffix;\n    }\n    if (format != null) {\n      source = source + '.' + format;\n      source_to_sign = source_to_sign + '.' + format;\n    }\n  }\n  return [source, source_to_sign];\n}\n\nfunction video_thumbnail_url(public_id, options) {\n  options = extend({}, DEFAULT_POSTER_OPTIONS, options);\n  return utils.url(public_id, options);\n}\n\nfunction finalize_resource_type(resource_type, type, url_suffix, use_root_path, shorten) {\n  if (type == null) {\n    type = 'upload';\n  }\n  if (url_suffix != null) {\n    if (resource_type === 'image' && type === 'upload') {\n      resource_type = \"images\";\n      type = null;\n    } else if (resource_type === 'image' && type === 'private') {\n      resource_type = 'private_images';\n      type = null;\n    } else if (resource_type === 'image' && type === 'authenticated') {\n      resource_type = 'authenticated_images';\n      type = null;\n    } else if (resource_type === 'raw' && type === 'upload') {\n      resource_type = 'files';\n      type = null;\n    } else if (resource_type === 'video' && type === 'upload') {\n      resource_type = 'videos';\n      type = null;\n    } else {\n      throw new Error(\"URL Suffix only supported for image/upload, image/private, image/authenticated, video/upload and raw/upload\");\n    }\n  }\n  if (use_root_path) {\n    if (resource_type === 'image' && type === 'upload' || resource_type === 'images' && type == null) {\n      resource_type = null;\n      type = null;\n    } else {\n      throw new Error(\"Root path only supported for image/upload\");\n    }\n  }\n  if (shorten && resource_type === 'image' && type === 'upload') {\n    resource_type = 'iu';\n    type = null;\n  }\n  return [resource_type, type];\n}\n// cdn_subdomain and secure_cdn_subdomain\n// 1) Customers in shared distribution (e.g. res.cloudinary.com)\n//    if cdn_domain is true uses res-[1-5].cloudinary.com for both http and https.\n//    Setting secure_cdn_subdomain to false disables this for https.\n// 2) Customers with private cdn\n//    if cdn_domain is true uses cloudname-res-[1-5].cloudinary.com for http\n//    if secure_cdn_domain is true uses cloudname-res-[1-5].cloudinary.com for https\n//      (please contact support if you require this)\n// 3) Customers with cname\n//    if cdn_domain is true uses a[1-5].cname for http.\n//    For https, uses the same naming scheme as 1 for shared distribution and as 2 for private distribution.\n\nfunction unsigned_url_prefix(source, cloud_name, private_cdn, cdn_subdomain, secure_cdn_subdomain, cname, secure, secure_distribution) {\n  var prefix = void 0;\n  if (cloud_name.indexOf(\"/\") === 0) {\n    return '/res' + cloud_name;\n  }\n  var shared_domain = !private_cdn;\n  if (secure) {\n    if (secure_distribution == null || secure_distribution === exports.OLD_AKAMAI_SHARED_CDN) {\n      secure_distribution = private_cdn ? cloud_name + \"-res.cloudinary.com\" : exports.SHARED_CDN;\n    }\n    if (shared_domain == null) {\n      shared_domain = secure_distribution === exports.SHARED_CDN;\n    }\n    if (secure_cdn_subdomain == null && shared_domain) {\n      secure_cdn_subdomain = cdn_subdomain;\n    }\n    if (secure_cdn_subdomain) {\n      secure_distribution = secure_distribution.replace('res.cloudinary.com', 'res-' + (crc32(source) % 5 + 1 + '.cloudinary.com'));\n    }\n    prefix = 'https://' + secure_distribution;\n  } else if (cname) {\n    var subdomain = cdn_subdomain ? 'a' + (crc32(source) % 5 + 1) + '.' : '';\n    prefix = 'http://' + subdomain + cname;\n  } else {\n    var cdn_part = private_cdn ? cloud_name + '-' : '';\n    var subdomain_part = cdn_subdomain ? '-' + (crc32(source) % 5 + 1) : '';\n    var host = [cdn_part, 'res', subdomain_part, '.cloudinary.com'].join('');\n    prefix = 'http://' + host;\n  }\n  if (shared_domain) {\n    prefix += '/' + cloud_name;\n  }\n  return prefix;\n}\n\nfunction base_api_url() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var cloudinary = ensureOption(options, \"upload_prefix\", UPLOAD_PREFIX);\n  var cloud_name = ensureOption(options, \"cloud_name\");\n  var encode_path = function encode_path(unencoded_path) {\n    return encodeURIComponent(unencoded_path).replace(\"'\", '%27');\n  };\n  var encoded_path = Array.isArray(path) ? path.map(encode_path) : encode_path(path);\n  return [cloudinary, \"v1_1\", cloud_name].concat(encoded_path).join(\"/\");\n}\n\nfunction api_url() {\n  var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'upload';\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var resource_type = options.resource_type || \"image\";\n  return base_api_url([resource_type, action], options);\n}\n\nfunction random_public_id() {\n  return crypto.randomBytes(12).toString('base64').replace(/[^a-z0-9]/g, \"\");\n}\n\nfunction signed_preloaded_image(result) {\n  return `${result.resource_type}/upload/v${result.version}/${filter([result.public_id, result.format], utils.present).join(\".\")}#${result.signature}`;\n}\n\nfunction api_sign_request(params_to_sign, api_secret) {\n  var to_sign = entries(params_to_sign).filter(function (_ref22) {\n    var _ref23 = _slicedToArray(_ref22, 2),\n        k = _ref23[0],\n        v = _ref23[1];\n\n    return utils.present(v);\n  }).map(function (_ref24) {\n    var _ref25 = _slicedToArray(_ref24, 2),\n        k = _ref25[0],\n        v = _ref25[1];\n\n    return `${k}=${toArray(v).join(\",\")}`;\n  }).sort().join(\"&\");\n  return computeHash(to_sign + api_secret, config().signature_algorithm || DEFAULT_SIGNATURE_ALGORITHM, 'hex');\n}\n\n/**\n * Computes hash from input string using specified algorithm.\n * @private\n * @param {string} input string which to compute hash from\n * @param {string} signature_algorithm algorithm to use for computing hash\n * @param {string} encoding type of encoding\n * @return {string} computed hash value\n */\nfunction computeHash(input, signature_algorithm, encoding) {\n  if (!SUPPORTED_SIGNATURE_ALGORITHMS.includes(signature_algorithm)) {\n    throw new Error(`Signature algorithm ${signature_algorithm} is not supported. Supported algorithms: ${SUPPORTED_SIGNATURE_ALGORITHMS.join(', ')}`);\n  }\n  var hash = crypto.createHash(signature_algorithm);\n  hash.update(utf8_encode(input), 'binary');\n  return hash.digest(encoding);\n}\n\nfunction clear_blank(hash) {\n  var filtered_hash = {};\n  entries(hash).filter(function (_ref26) {\n    var _ref27 = _slicedToArray(_ref26, 2),\n        k = _ref27[0],\n        v = _ref27[1];\n\n    return utils.present(v);\n  }).forEach(function (_ref28) {\n    var _ref29 = _slicedToArray(_ref28, 2),\n        k = _ref29[0],\n        v = _ref29[1];\n\n    filtered_hash[k] = v.filter ? v.filter(function (x) {\n      return x;\n    }) : v;\n  });\n  return filtered_hash;\n}\n\nfunction merge(hash1, hash2) {\n  return _extends({}, hash1, hash2);\n}\n\nfunction sign_request(params) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var apiKey = ensureOption(options, 'api_key');\n  var apiSecret = ensureOption(options, 'api_secret');\n  params = exports.clear_blank(params);\n  params.signature = exports.api_sign_request(params, apiSecret);\n  params.api_key = apiKey;\n  return params;\n}\n\nfunction webhook_signature(data, timestamp) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  ensurePresenceOf({ data, timestamp });\n\n  var api_secret = ensureOption(options, 'api_secret');\n  var signature_algorithm = ensureOption(options, 'signature_algorithm', DEFAULT_SIGNATURE_ALGORITHM);\n  return computeHash(data + timestamp + api_secret, signature_algorithm, 'hex');\n}\n\n/**\n * Verifies the authenticity of a notification signature\n *\n * @param {string} body JSON of the request's body\n * @param {number} timestamp Unix timestamp in seconds. Can be retrieved from the X-Cld-Timestamp header\n * @param {string} signature Actual signature. Can be retrieved from the X-Cld-Signature header\n * @param {number} [valid_for=7200] The desired time in seconds for considering the request valid\n *\n * @return {boolean}\n */\nfunction verifyNotificationSignature(body, timestamp, signature) {\n  var valid_for = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 7200;\n\n  // verify that signature is valid for the given timestamp\n  if (timestamp < Math.round(Date.now() / 1000) - valid_for) {\n    return false;\n  }\n  var payload_hash = utils.webhook_signature(body, timestamp, {\n    api_secret: config().api_secret,\n    signature_algorithm: config().signature_algorithm\n  });\n  return signature === payload_hash;\n}\n\nfunction process_request_params(params, options) {\n  if (options.unsigned != null && options.unsigned) {\n    params = exports.clear_blank(params);\n    delete params.timestamp;\n  } else if (options.oauth_token || config().oauth_token) {\n    params = exports.clear_blank(params);\n  } else if (options.signature) {\n    params = exports.clear_blank(options);\n  } else {\n    params = exports.sign_request(params, options);\n  }\n\n  return params;\n}\n\nfunction private_download_url(public_id, format) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    public_id: public_id,\n    format: format,\n    type: options.type,\n    attachment: options.attachment,\n    expires_at: options.expires_at\n  }, options);\n  return exports.api_url(\"download\", options) + \"?\" + querystring.stringify(params);\n}\n\n/**\n * Utility method that uses the deprecated ZIP download API.\n * @deprecated Replaced by {download_zip_url} that uses the more advanced and robust archive generation and download API\n */\n\nfunction zip_download_url(tag) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    tag: tag,\n    transformation: utils.generate_transformation_string(options)\n  }, options);\n  return exports.api_url(\"download_tag.zip\", options) + \"?\" + hashToQuery(params);\n}\n\n/**\n * The returned url should allow downloading the backedup asset based on the\n * version and asset id\n * asset and version id are returned with resource(<PUBLIC_ID1>, { versions: true })\n * @param asset_id\n * @param version_id\n * @param options\n * @returns {string }\n */\nfunction download_backedup_asset(asset_id, version_id) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var params = exports.sign_request({\n    timestamp: options.timestamp || exports.timestamp(),\n    asset_id: asset_id,\n    version_id: version_id\n  }, options);\n  return exports.base_api_url(['download_backup'], options) + \"?\" + hashToQuery(params);\n}\n\n/**\n * Utility method to create a signed URL for specified resources.\n * @param action\n * @param params\n * @param options\n */\nfunction api_download_url(action, params, options) {\n  var download_params = _extends({}, params, { mode: \"download\" });\n  var cloudinary_params = exports.sign_request(download_params, options);\n  return exports.api_url(action, options) + \"?\" + hashToQuery(cloudinary_params);\n}\n\n/**\n * Returns a URL that when invokes creates an archive and returns it.\n * @param {object} options\n * @param {string} [options.resource_type=\"image\"] The resource type of files to include in the archive.\n *   Must be one of :image | :video | :raw\n * @param {string} [options.type=\"upload\"] The specific file type of resources: :upload|:private|:authenticated\n * @param {string|Array} [options.tags] list of tags to include in the archive\n * @param {string|Array<string>} [options.public_ids] list of public_ids to include in the archive\n * @param {string|Array<string>} [options.prefixes]  list of prefixes of public IDs (e.g., folders).\n * @param {string|Array<string>} [options.fully_qualified_public_ids] list of fully qualified public_ids to include\n *   in the archive.\n * @param {string|Array<string>} [options.transformations]  list of transformations.\n *   The derived images of the given transformations are included in the archive. Using the string representation of\n *   multiple chained transformations as we use for the 'eager' upload parameter.\n * @param {string} [options.mode=\"create\"] return the generated archive file or to store it as a raw resource and\n *   return a JSON with URLs for accessing the archive. Possible values: :download, :create\n * @param {string} [options.target_format=\"zip\"]\n * @param {string} [options.target_public_id]  public ID of the generated raw resource.\n *   Relevant only for the create mode. If not specified, random public ID is generated.\n * @param {boolean} [options.flatten_folders=false] If true, flatten public IDs with folders to be in the root\n *   of the archive. Add numeric counter to the file name in case of a name conflict.\n * @param {boolean} [options.flatten_transformations=false] If true, and multiple transformations are given,\n *   flatten the folder structure of derived images and store the transformation details on the file name instead.\n * @param {boolean} [options.use_original_filename] Use the original file name of included images\n *   (if available) instead of the public ID.\n * @param {boolean} [options.async=false] If true, return immediately and perform archive creation in the background.\n *   Relevant only for the create mode.\n * @param {string} [options.notification_url] URL to send an HTTP post request (webhook) to when the\n *   archive creation is completed.\n * @param {string|Array<string>} [options.target_tags=] Allows assigning one or more tags to the generated archive file\n *   (for later housekeeping via the admin API).\n * @param {string} [options.keep_derived=false] keep the derived images used for generating the archive\n * @return {String} archive url\n */\nfunction download_archive_url() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var params = exports.archive_params(merge(options, {\n    mode: \"download\"\n  }));\n  return api_download_url(\"generate_archive\", params, options);\n}\n\n/**\n * Returns a URL that when invokes creates an zip archive and returns it.\n * @see download_archive_url\n */\n\nfunction download_zip_url() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  return exports.download_archive_url(merge(options, {\n    target_format: \"zip\"\n  }));\n}\n\n/**\n * Creates and returns a URL that when invoked creates an archive of a folder\n * @param {string} folder_path Full path (from the root) of the folder to download\n * @param {object} options Additional options\n * @returns {string} Url for downloading an archive of a folder\n */\nfunction download_folder(folder_path) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  options.resource_type = options.resource_type || \"all\";\n  options.prefixes = folder_path;\n  var cloudinary_params = exports.sign_request(exports.archive_params(merge(options, {\n    mode: \"download\"\n  })), options);\n  return exports.api_url(\"generate_archive\", options) + \"?\" + hashToQuery(cloudinary_params);\n}\n\n/**\n * Render the key/value pair as an HTML tag attribute\n * @private\n * @param {string} key\n * @param {string|boolean|number} [value]\n * @return {string} A string representing the HTML attribute\n */\nfunction join_pair(key, value) {\n  if (!value) {\n    return void 0;\n  }\n  return value === true ? key : key + \"='\" + value + \"'\";\n}\n\n/**\n * If the given value is a string, replaces single or double quotes with character entities\n * @private\n * @param {*} value The string to encode quotes in\n * @return {*} Encoded string or original value if not a string\n */\nfunction escapeQuotes(value) {\n  return isString(value) ? value.replace(/\\\"/g, '&#34;').replace(/\\'/g, '&#39;') : value;\n}\n\n/**\n *\n * @param attrs\n * @return {*}\n */\nexports.html_attrs = function html_attrs(attrs) {\n  return filter(map(attrs, function (value, key) {\n    return join_pair(key, escapeQuotes(value));\n  })).sort().join(\" \");\n};\n\nvar CLOUDINARY_JS_CONFIG_PARAMS = ['api_key', 'cloud_name', 'private_cdn', 'secure_distribution', 'cdn_subdomain'];\n\nfunction cloudinary_js_config() {\n  var params = pickOnlyExistingValues.apply(undefined, [config()].concat(CLOUDINARY_JS_CONFIG_PARAMS));\n  return `<script type='text/javascript'>\\n$.cloudinary.config(${JSON.stringify(params)});\\n</script>`;\n}\n\nfunction v1_result_adapter(callback) {\n  if (callback == null) {\n    return undefined;\n  }\n  return function (result) {\n    if (result.error != null) {\n      return callback(result.error);\n    }\n    return callback(void 0, result);\n  };\n}\n\nfunction v1_adapter(name, num_pass_args, v1) {\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var pass_args = take(args, num_pass_args);\n    var options = args[num_pass_args];\n    var callback = args[num_pass_args + 1];\n    if (callback == null && isFunction(options)) {\n      callback = options;\n      options = {};\n    }\n    callback = v1_result_adapter(callback);\n    args = pass_args.concat([callback, options]);\n    return v1[name].apply(this, args);\n  };\n}\n\nfunction v1_adapters(exports, v1, mapping) {\n  return Object.keys(mapping).map(function (name) {\n    var num_pass_args = mapping[name];\n    exports[name] = v1_adapter(name, num_pass_args, v1);\n    return exports[name];\n  });\n}\n\nfunction as_safe_bool(value) {\n  if (value == null) {\n    return void 0;\n  }\n  if (value === true || value === 'true' || value === '1') {\n    value = 1;\n  }\n  if (value === false || value === 'false' || value === '0') {\n    value = 0;\n  }\n  return value;\n}\n\nvar NUMBER_PATTERN = \"([0-9]*)\\\\.([0-9]+)|([0-9]+)\";\n\nvar OFFSET_ANY_PATTERN = `(${NUMBER_PATTERN})([%pP])?`;\nvar RANGE_VALUE_RE = RegExp(`^${OFFSET_ANY_PATTERN}$`);\nvar OFFSET_ANY_PATTERN_RE = RegExp(`(${OFFSET_ANY_PATTERN})\\\\.\\\\.(${OFFSET_ANY_PATTERN})`);\n\n// Split a range into the start and end values\nfunction split_range(range) {\n  // :nodoc:\n  switch (range.constructor) {\n    case String:\n      if (!OFFSET_ANY_PATTERN_RE.test(range)) {\n        return range;\n      }\n      return range.split(\"..\");\n    case Array:\n      return [first(range), last(range)];\n    default:\n      return [null, null];\n  }\n}\n\nfunction norm_range_value(value) {\n  // :nodoc:\n  var offset = String(value).match(RANGE_VALUE_RE);\n  if (offset) {\n    var modifier = offset[5] ? 'p' : '';\n    value = `${offset[1] || offset[4]}${modifier}`;\n  }\n  return value;\n}\n\n/**\n * A video codec parameter can be either a String or a Hash.\n * @param {Object} param <code>vc_<codec>[ : <profile> : [<level>]]</code>\n *                       or <code>{ codec: 'h264', profile: 'basic', level: '3.1' }</code>\n * @return {String} <code><codec> : <profile> : [<level>]]</code> if a Hash was provided\n *                   or the param if a String was provided.\n *                   Returns null if param is not a Hash or String\n */\nfunction process_video_params(param) {\n  switch (param.constructor) {\n    case Object:\n      {\n        var video = \"\";\n        if ('codec' in param) {\n          video = param.codec;\n          if ('profile' in param) {\n            video += \":\" + param.profile;\n            if ('level' in param) {\n              video += \":\" + param.level;\n            }\n          }\n        }\n        return video;\n      }\n    case String:\n      return param;\n    default:\n      return null;\n  }\n}\n/**\n * Returns a Hash of parameters used to create an archive\n * @private\n * @param {object} options\n * @return {object} Archive API parameters\n */\n\nfunction archive_params() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  return {\n    allow_missing: exports.as_safe_bool(options.allow_missing),\n    async: exports.as_safe_bool(options.async),\n    expires_at: options.expires_at,\n    flatten_folders: exports.as_safe_bool(options.flatten_folders),\n    flatten_transformations: exports.as_safe_bool(options.flatten_transformations),\n    keep_derived: exports.as_safe_bool(options.keep_derived),\n    mode: options.mode,\n    notification_url: options.notification_url,\n    prefixes: options.prefixes && toArray(options.prefixes),\n    fully_qualified_public_ids: options.fully_qualified_public_ids && toArray(options.fully_qualified_public_ids),\n    public_ids: options.public_ids && toArray(options.public_ids),\n    skip_transformation_name: exports.as_safe_bool(options.skip_transformation_name),\n    tags: options.tags && toArray(options.tags),\n    target_format: options.target_format,\n    target_public_id: options.target_public_id,\n    target_tags: options.target_tags && toArray(options.target_tags),\n    timestamp: options.timestamp || exports.timestamp(),\n    transformations: utils.build_eager(options.transformations),\n    type: options.type,\n    use_original_filename: exports.as_safe_bool(options.use_original_filename)\n  };\n}\n\nexports.create_source_tag = function create_source_tag(src, source_type) {\n  var codecs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var video_type = source_type === 'ogv' ? 'ogg' : source_type;\n  var mime_type = `video/${video_type}`;\n  if (!isEmpty(codecs)) {\n    var codecs_str = isArray(codecs) ? codecs.join(', ') : codecs;\n    mime_type += `; codecs=${codecs_str}`;\n  }\n  return `<source ${utils.html_attrs({ src, type: mime_type })}>`;\n};\n\nfunction build_explicit_api_params(public_id) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  return [exports.build_upload_params(extend({}, { public_id }, options))];\n}\n\nfunction generate_responsive_breakpoints_string(breakpoints) {\n  if (breakpoints == null) {\n    return null;\n  }\n  breakpoints = clone(breakpoints);\n  if (!isArray(breakpoints)) {\n    breakpoints = [breakpoints];\n  }\n  for (var j = 0; j < breakpoints.length; j++) {\n    var breakpoint_settings = breakpoints[j];\n    if (breakpoint_settings != null) {\n      if (breakpoint_settings.transformation) {\n        breakpoint_settings.transformation = utils.generate_transformation_string(clone(breakpoint_settings.transformation));\n      }\n    }\n  }\n  return JSON.stringify(breakpoints);\n}\n\nfunction build_streaming_profiles_param() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var params = pickOnlyExistingValues(options, \"display_name\", \"representations\");\n  if (isArray(params.representations)) {\n    params.representations = JSON.stringify(params.representations.map(function (r) {\n      return {\n        transformation: utils.generate_transformation_string(r.transformation)\n      };\n    }));\n  }\n  return params;\n}\n\nfunction hashToParameters(hash) {\n  return entries(hash).reduce(function (parameters, _ref30) {\n    var _ref31 = _slicedToArray(_ref30, 2),\n        key = _ref31[0],\n        value = _ref31[1];\n\n    if (isArray(value)) {\n      key = key.endsWith('[]') ? key : key + '[]';\n      var items = value.map(function (v) {\n        return [key, v];\n      });\n      parameters = parameters.concat(items);\n    } else {\n      parameters.push([key, value]);\n    }\n    return parameters;\n  }, []);\n}\n\n/**\n * Convert a hash of values to a URI query string.\n * Array values are spread as individual parameters.\n * @param {object} hash Key-value parameters\n * @return {string} A URI query string.\n */\nfunction hashToQuery(hash) {\n  return hashToParameters(hash).map(function (_ref32) {\n    var _ref33 = _slicedToArray(_ref32, 2),\n        key = _ref33[0],\n        value = _ref33[1];\n\n    return `${querystring.escape(key)}=${querystring.escape(value)}`;\n  }).join('&');\n}\n\n/**\n * Verify that the parameter `value` is defined and it's string value is not zero.\n * <br>This function should not be confused with `isEmpty()`.\n * @private\n * @param {string|number} value The value to check.\n * @return {boolean} True if the value is defined and not empty.\n */\n\nfunction present(value) {\n  return value != null && (\"\" + value).length > 0;\n}\n\n/**\n * Returns a new object with key values from source based on the keys.\n * `null` or `undefined` values are not copied.\n * @private\n * @param {object} source The object to pick values from.\n * @param {...string} keys One or more keys to copy from source.\n * @return {object} A new object with the required keys and values.\n */\n\nfunction pickOnlyExistingValues(source) {\n  var result = {};\n  if (source) {\n    for (var _len2 = arguments.length, keys = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      keys[_key2 - 1] = arguments[_key2];\n    }\n\n    keys.forEach(function (key) {\n      if (source[key] != null) {\n        result[key] = source[key];\n      }\n    });\n  }\n  return result;\n}\n\n/**\n * Returns a JSON array as String.\n * Yields the array before it is converted to JSON format\n * @private\n * @param {object|String|Array<object>} data\n * @param {function(*):*} [modifier] called with the array before the array is stringified\n * @return {String|null} a JSON array string or `null` if data is `null`\n */\n\nfunction jsonArrayParam(data, modifier) {\n  if (!data) {\n    return null;\n  }\n  if (isString(data)) {\n    data = JSON.parse(data);\n  }\n  if (!isArray(data)) {\n    data = [data];\n  }\n  if (isFunction(modifier)) {\n    data = modifier(data);\n  }\n  return JSON.stringify(data);\n}\n\nfunction optionalRequire(moduleName) {\n  var module = void 0;\n  try {\n    module = require(moduleName);\n    return module;\n  } catch (e) {\n    if (e.code === \"MODULE_NOT_FOUND\") {\n      return null;\n    }\n    throw e;\n  }\n}\n\n/**\n * Empty function - do nothing\n *\n */\nexports.NOP = function () {};\nexports.generate_auth_token = generate_auth_token;\nexports.getUserAgent = getUserAgent;\nexports.build_upload_params = build_upload_params;\nexports.build_multi_and_sprite_params = build_multi_and_sprite_params;\nexports.api_download_url = api_download_url;\nexports.timestamp = function () {\n  return Math.floor(new Date().getTime() / 1000);\n};\nexports.option_consume = consumeOption; // for backwards compatibility\nexports.build_array = toArray; // for backwards compatibility\nexports.encode_double_array = encodeDoubleArray;\nexports.encode_key_value = encode_key_value;\nexports.encode_context = encode_context;\nexports.build_eager = build_eager;\nexports.build_custom_headers = build_custom_headers;\nexports.generate_transformation_string = generate_transformation_string;\nexports.updateable_resource_params = updateable_resource_params;\nexports.extractUrlParams = extractUrlParams;\nexports.extractTransformationParams = extractTransformationParams;\nexports.patchFetchFormat = patchFetchFormat;\nexports.url = url;\nexports.video_url = video_url;\nexports.video_thumbnail_url = video_thumbnail_url;\nexports.api_url = api_url;\nexports.random_public_id = random_public_id;\nexports.signed_preloaded_image = signed_preloaded_image;\nexports.api_sign_request = api_sign_request;\nexports.clear_blank = clear_blank;\nexports.merge = merge;\nexports.sign_request = sign_request;\nexports.webhook_signature = webhook_signature;\nexports.verifyNotificationSignature = verifyNotificationSignature;\nexports.process_request_params = process_request_params;\nexports.private_download_url = private_download_url;\nexports.zip_download_url = zip_download_url;\nexports.download_archive_url = download_archive_url;\nexports.download_zip_url = download_zip_url;\nexports.cloudinary_js_config = cloudinary_js_config;\nexports.v1_adapters = v1_adapters;\nexports.as_safe_bool = as_safe_bool;\nexports.archive_params = archive_params;\nexports.build_explicit_api_params = build_explicit_api_params;\nexports.generate_responsive_breakpoints_string = generate_responsive_breakpoints_string;\nexports.build_streaming_profiles_param = build_streaming_profiles_param;\nexports.hashToParameters = hashToParameters;\nexports.present = present;\nexports.only = pickOnlyExistingValues; // for backwards compatibility\nexports.pickOnlyExistingValues = pickOnlyExistingValues;\nexports.jsonArrayParam = jsonArrayParam;\nexports.download_folder = download_folder;\nexports.base_api_url = base_api_url;\nexports.download_backedup_asset = download_backedup_asset;\nexports.optionalRequire = optionalRequire;\n\n// was exported before, so kept for backwards compatibility\nexports.DEFAULT_POSTER_OPTIONS = DEFAULT_POSTER_OPTIONS;\nexports.DEFAULT_VIDEO_SOURCE_TYPES = DEFAULT_VIDEO_SOURCE_TYPES;\n\nObject.assign(module.exports, {\n  normalize_expression,\n  at,\n  clone,\n  extend,\n  filter,\n  includes,\n  isArray,\n  isEmpty,\n  isNumber,\n  isObject,\n  isRemoteUrl,\n  isString,\n  isUndefined,\n  keys: function keys(source) {\n    return Object.keys(source);\n  },\n  ensurePresenceOf\n});"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}